(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Slate=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":2,_process:177}],2:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:176}],3:[function(require,module,exports){"use strict";var GROUP_LEFT_TO_RIGHT,GROUP_RIGHT_TO_LEFT,EXPRESSION_LEFT_TO_RIGHT,EXPRESSION_RIGHT_TO_LEFT;GROUP_LEFT_TO_RIGHT="A-Za-zÀ-ÖØ-ö"+"ø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜"+"︀-﹯﻽-￿";GROUP_RIGHT_TO_LEFT="֑-߿יִ-﷽ﹰ-ﻼ";EXPRESSION_LEFT_TO_RIGHT=new RegExp("^[^"+GROUP_RIGHT_TO_LEFT+"]*["+GROUP_LEFT_TO_RIGHT+"]");EXPRESSION_RIGHT_TO_LEFT=new RegExp("^[^"+GROUP_LEFT_TO_RIGHT+"]*["+GROUP_RIGHT_TO_LEFT+"]");function direction(value){value=value.toString();if(EXPRESSION_RIGHT_TO_LEFT.test(value)){return"rtl"}if(EXPRESSION_LEFT_TO_RIGHT.test(value)){return"ltr"}return"neutral"}module.exports=direction},{}],4:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var regexSymbolWithCombiningMarks=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g;var regexSurrogatePair=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g;var reverse=function(string){string=string.replace(regexSymbolWithCombiningMarks,function($0,$1,$2){return reverse($2)+$1}).replace(regexSurrogatePair,"$2$1");var result="";var index=string.length;while(index--){result+=string.charAt(index)}return result};var esrever={version:"0.2.0",reverse:reverse};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return esrever})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=esrever}else{for(var key in esrever){esrever.hasOwnProperty(key)&&(freeExports[key]=esrever[key])}}}else{root.esrever=esrever}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;function isEmpty(val){if(val==null)return true;if("boolean"==typeof val)return false;if("number"==typeof val)return val===0;if("string"==typeof val)return val.length===0;if("function"==typeof val)return val.length===0;if(Array.isArray(val))return val.length===0;if(val instanceof Error)return val.message==="";if(val.toString==toString){switch(val.toString()){case"[object File]":case"[object Map]":case"[object Set]":{return val.size===0}case"[object Object]":{for(var key in val){if(has.call(val,key))return false}return true}}}return false}module.exports=isEmpty},{}],6:[function(require,module,exports){"use strict";var isObject=require("isobject");function isObjectObject(o){return isObject(o)===true&&Object.prototype.toString.call(o)==="[object Object]"}module.exports=function isPlainObject(o){var ctor,prot;if(isObjectObject(o)===false)return false;ctor=o.constructor;if(typeof ctor!=="function")return false;prot=ctor.prototype;if(isObjectObject(prot)===false)return false;if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}},{isobject:7}],7:[function(require,module,exports){"use strict";module.exports=function isObject(val){return val!=null&&typeof val==="object"&&Array.isArray(val)===false}},{}],8:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var DataView=getNative(root,"DataView");module.exports=DataView},{"./_getNative":90,"./_root":133}],9:[function(require,module,exports){var hashClear=require("./_hashClear"),hashDelete=require("./_hashDelete"),hashGet=require("./_hashGet"),hashHas=require("./_hashHas"),hashSet=require("./_hashSet");function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},{"./_hashClear":98,"./_hashDelete":99,"./_hashGet":100,"./_hashHas":101,"./_hashSet":102}],10:[function(require,module,exports){var listCacheClear=require("./_listCacheClear"),listCacheDelete=require("./_listCacheDelete"),listCacheGet=require("./_listCacheGet"),listCacheHas=require("./_listCacheHas"),listCacheSet=require("./_listCacheSet");function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},{"./_listCacheClear":113,"./_listCacheDelete":114,"./_listCacheGet":115,"./_listCacheHas":116,"./_listCacheSet":117}],11:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Map=getNative(root,"Map");module.exports=Map},{"./_getNative":90,"./_root":133}],12:[function(require,module,exports){var mapCacheClear=require("./_mapCacheClear"),mapCacheDelete=require("./_mapCacheDelete"),mapCacheGet=require("./_mapCacheGet"),mapCacheHas=require("./_mapCacheHas"),mapCacheSet=require("./_mapCacheSet");function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},{"./_mapCacheClear":118,"./_mapCacheDelete":119,"./_mapCacheGet":120,"./_mapCacheHas":121,"./_mapCacheSet":122}],13:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Promise=getNative(root,"Promise");module.exports=Promise},{"./_getNative":90,"./_root":133}],14:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Set=getNative(root,"Set");module.exports=Set},{"./_getNative":90,"./_root":133}],15:[function(require,module,exports){var MapCache=require("./_MapCache"),setCacheAdd=require("./_setCacheAdd"),setCacheHas=require("./_setCacheHas");function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache},{"./_MapCache":12,"./_setCacheAdd":134,"./_setCacheHas":135}],16:[function(require,module,exports){var ListCache=require("./_ListCache"),stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},{"./_ListCache":10,"./_stackClear":139,"./_stackDelete":140,"./_stackGet":141,"./_stackHas":142,"./_stackSet":143}],17:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":133}],18:[function(require,module,exports){var root=require("./_root");var Uint8Array=root.Uint8Array;module.exports=Uint8Array},{"./_root":133}],19:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},{"./_getNative":90,"./_root":133}],20:[function(require,module,exports){function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}module.exports=addMapEntry},{}],21:[function(require,module,exports){function addSetEntry(set,value){set.add(value);return set}module.exports=addSetEntry},{}],22:[function(require,module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},{}],23:[function(require,module,exports){function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}module.exports=arrayEach},{}],24:[function(require,module,exports){function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}module.exports=arrayFilter},{}],25:[function(require,module,exports){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isIndex=require("./_isIndex"),isTypedArray=require("./isTypedArray");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},{"./_baseTimes":59,"./_isIndex":107,"./isArguments":152,"./isArray":153,"./isBuffer":156,"./isTypedArray":164}],26:[function(require,module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},{}],27:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],28:[function(require,module,exports){function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}module.exports=arrayReduce},{}],29:[function(require,module,exports){function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}module.exports=arraySome},{}],30:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignMergeValue},{"./_baseAssignValue":35,"./eq":148}],31:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},{"./_baseAssignValue":35,"./eq":148}],32:[function(require,module,exports){var eq=require("./eq");function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},{"./eq":148}],33:[function(require,module,exports){var copyObject=require("./_copyObject"),keys=require("./keys");function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}module.exports=baseAssign},{"./_copyObject":74,"./keys":165}],34:[function(require,module,exports){var copyObject=require("./_copyObject"),keysIn=require("./keysIn");function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}module.exports=baseAssignIn},{"./_copyObject":74,"./keysIn":166}],35:[function(require,module,exports){var defineProperty=require("./_defineProperty");function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},{"./_defineProperty":81}],36:[function(require,module,exports){var Stack=require("./_Stack"),arrayEach=require("./_arrayEach"),assignValue=require("./_assignValue"),baseAssign=require("./_baseAssign"),baseAssignIn=require("./_baseAssignIn"),cloneBuffer=require("./_cloneBuffer"),copyArray=require("./_copyArray"),copySymbols=require("./_copySymbols"),copySymbolsIn=require("./_copySymbolsIn"),getAllKeys=require("./_getAllKeys"),getAllKeysIn=require("./_getAllKeysIn"),getTag=require("./_getTag"),initCloneArray=require("./_initCloneArray"),initCloneByTag=require("./_initCloneByTag"),initCloneObject=require("./_initCloneObject"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isObject=require("./isObject"),keys=require("./keys");var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}module.exports=baseClone},{"./_Stack":16,"./_arrayEach":23,"./_assignValue":31,"./_baseAssign":33,"./_baseAssignIn":34,"./_cloneBuffer":66,"./_copyArray":73,"./_copySymbols":75,"./_copySymbolsIn":76,"./_getAllKeys":87,"./_getAllKeysIn":88,"./_getTag":95,"./_initCloneArray":103,"./_initCloneByTag":104,"./_initCloneObject":105,"./isArray":153,"./isBuffer":156,"./isObject":160,"./keys":165}],37:[function(require,module,exports){var isObject=require("./isObject");var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();module.exports=baseCreate},{"./isObject":160}],38:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isFlattenable=require("./_isFlattenable");function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{"./_arrayPush":27,"./_isFlattenable":106}],39:[function(require,module,exports){var createBaseFor=require("./_createBaseFor");var baseFor=createBaseFor();module.exports=baseFor},{"./_createBaseFor":79}],40:[function(require,module,exports){var castPath=require("./_castPath"),toKey=require("./_toKey");function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},{"./_castPath":64,"./_toKey":145}],41:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isArray=require("./isArray");function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}module.exports=baseGetAllKeys},{"./_arrayPush":27,"./isArray":153}],42:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":17,"./_getRawTag":92,"./_objectToString":129}],43:[function(require,module,exports){function baseHasIn(object,key){return object!=null&&key in Object(object)}module.exports=baseHasIn},{}],44:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},{"./_baseGetTag":42,"./isObjectLike":161}],45:[function(require,module,exports){var baseIsEqualDeep=require("./_baseIsEqualDeep"),isObjectLike=require("./isObjectLike");function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}module.exports=baseIsEqual},{"./_baseIsEqualDeep":46,"./isObjectLike":161}],46:[function(require,module,exports){var Stack=require("./_Stack"),equalArrays=require("./_equalArrays"),equalByTag=require("./_equalByTag"),equalObjects=require("./_equalObjects"),getTag=require("./_getTag"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isTypedArray=require("./isTypedArray");var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}module.exports=baseIsEqualDeep},{"./_Stack":16,"./_equalArrays":82,"./_equalByTag":83,"./_equalObjects":84,"./_getTag":95,"./isArray":153,"./isBuffer":156,"./isTypedArray":164}],47:[function(require,module,exports){var isFunction=require("./isFunction"),isMasked=require("./_isMasked"),isObject=require("./isObject"),toSource=require("./_toSource");var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},{"./_isMasked":111,"./_toSource":146,"./isFunction":158,"./isObject":160}],48:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isLength=require("./isLength"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},{"./_baseGetTag":42,"./isLength":159,"./isObjectLike":161}],49:[function(require,module,exports){var isPrototype=require("./_isPrototype"),nativeKeys=require("./_nativeKeys");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}module.exports=baseKeys},{"./_isPrototype":112,"./_nativeKeys":126}],50:[function(require,module,exports){var isObject=require("./isObject"),isPrototype=require("./_isPrototype"),nativeKeysIn=require("./_nativeKeysIn");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=baseKeysIn},{"./_isPrototype":112,"./_nativeKeysIn":127,"./isObject":160}],51:[function(require,module,exports){var Stack=require("./_Stack"),assignMergeValue=require("./_assignMergeValue"),baseFor=require("./_baseFor"),baseMergeDeep=require("./_baseMergeDeep"),isObject=require("./isObject"),keysIn=require("./keysIn");function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack);baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}module.exports=baseMerge},{"./_Stack":16,"./_assignMergeValue":30,"./_baseFor":39,"./_baseMergeDeep":52,"./isObject":160,"./keysIn":166}],52:[function(require,module,exports){
var assignMergeValue=require("./_assignMergeValue"),cloneBuffer=require("./_cloneBuffer"),cloneTypedArray=require("./_cloneTypedArray"),copyArray=require("./_copyArray"),initCloneObject=require("./_initCloneObject"),isArguments=require("./isArguments"),isArray=require("./isArray"),isArrayLikeObject=require("./isArrayLikeObject"),isBuffer=require("./isBuffer"),isFunction=require("./isFunction"),isObject=require("./isObject"),isPlainObject=require("./isPlainObject"),isTypedArray=require("./isTypedArray"),toPlainObject=require("./toPlainObject");function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}module.exports=baseMergeDeep},{"./_assignMergeValue":30,"./_cloneBuffer":66,"./_cloneTypedArray":72,"./_copyArray":73,"./_initCloneObject":105,"./isArguments":152,"./isArray":153,"./isArrayLikeObject":155,"./isBuffer":156,"./isFunction":158,"./isObject":160,"./isPlainObject":162,"./isTypedArray":164,"./toPlainObject":174}],53:[function(require,module,exports){var basePickBy=require("./_basePickBy"),hasIn=require("./hasIn");function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}module.exports=basePick},{"./_basePickBy":54,"./hasIn":150}],54:[function(require,module,exports){var baseGet=require("./_baseGet"),baseSet=require("./_baseSet"),castPath=require("./_castPath");function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}module.exports=basePickBy},{"./_baseGet":40,"./_baseSet":56,"./_castPath":64}],55:[function(require,module,exports){var identity=require("./identity"),overRest=require("./_overRest"),setToString=require("./_setToString");function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}module.exports=baseRest},{"./_overRest":131,"./_setToString":137,"./identity":151}],56:[function(require,module,exports){var assignValue=require("./_assignValue"),castPath=require("./_castPath"),isIndex=require("./_isIndex"),isObject=require("./isObject"),toKey=require("./_toKey");function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},{"./_assignValue":31,"./_castPath":64,"./_isIndex":107,"./_toKey":145,"./isObject":160}],57:[function(require,module,exports){var constant=require("./constant"),defineProperty=require("./_defineProperty"),identity=require("./identity");var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};module.exports=baseSetToString},{"./_defineProperty":81,"./constant":147,"./identity":151}],58:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}module.exports=baseSlice},{}],59:[function(require,module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},{}],60:[function(require,module,exports){var Symbol=require("./_Symbol"),arrayMap=require("./_arrayMap"),isArray=require("./isArray"),isSymbol=require("./isSymbol");var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},{"./_Symbol":17,"./_arrayMap":26,"./isArray":153,"./isSymbol":163}],61:[function(require,module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},{}],62:[function(require,module,exports){var castPath=require("./_castPath"),last=require("./last"),parent=require("./_parent"),toKey=require("./_toKey");function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}module.exports=baseUnset},{"./_castPath":64,"./_parent":132,"./_toKey":145,"./last":167}],63:[function(require,module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},{}],64:[function(require,module,exports){var isArray=require("./isArray"),isKey=require("./_isKey"),stringToPath=require("./_stringToPath"),toString=require("./toString");function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},{"./_isKey":109,"./_stringToPath":144,"./isArray":153,"./toString":175}],65:[function(require,module,exports){var Uint8Array=require("./_Uint8Array");function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}module.exports=cloneArrayBuffer},{"./_Uint8Array":18}],66:[function(require,module,exports){var root=require("./_root");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}module.exports=cloneBuffer},{"./_root":133}],67:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer");function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}module.exports=cloneDataView},{"./_cloneArrayBuffer":65}],68:[function(require,module,exports){var addMapEntry=require("./_addMapEntry"),arrayReduce=require("./_arrayReduce"),mapToArray=require("./_mapToArray");var CLONE_DEEP_FLAG=1;function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}module.exports=cloneMap},{"./_addMapEntry":20,"./_arrayReduce":28,"./_mapToArray":123}],69:[function(require,module,exports){var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}module.exports=cloneRegExp},{}],70:[function(require,module,exports){var addSetEntry=require("./_addSetEntry"),arrayReduce=require("./_arrayReduce"),setToArray=require("./_setToArray");var CLONE_DEEP_FLAG=1;function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}module.exports=cloneSet},{"./_addSetEntry":21,"./_arrayReduce":28,"./_setToArray":136}],71:[function(require,module,exports){var Symbol=require("./_Symbol");var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}module.exports=cloneSymbol},{"./_Symbol":17}],72:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer");function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}module.exports=cloneTypedArray},{"./_cloneArrayBuffer":65}],73:[function(require,module,exports){function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}module.exports=copyArray},{}],74:[function(require,module,exports){var assignValue=require("./_assignValue"),baseAssignValue=require("./_baseAssignValue");function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}module.exports=copyObject},{"./_assignValue":31,"./_baseAssignValue":35}],75:[function(require,module,exports){var copyObject=require("./_copyObject"),getSymbols=require("./_getSymbols");function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}module.exports=copySymbols},{"./_copyObject":74,"./_getSymbols":93}],76:[function(require,module,exports){var copyObject=require("./_copyObject"),getSymbolsIn=require("./_getSymbolsIn");function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}module.exports=copySymbolsIn},{"./_copyObject":74,"./_getSymbolsIn":94}],77:[function(require,module,exports){var root=require("./_root");var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},{"./_root":133}],78:[function(require,module,exports){var baseRest=require("./_baseRest"),isIterateeCall=require("./_isIterateeCall");function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}module.exports=createAssigner},{"./_baseRest":55,"./_isIterateeCall":108}],79:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=createBaseFor},{}],80:[function(require,module,exports){var isPlainObject=require("./isPlainObject");function customOmitClone(value){return isPlainObject(value)?undefined:value}module.exports=customOmitClone},{"./isPlainObject":162}],81:[function(require,module,exports){var getNative=require("./_getNative");var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},{"./_getNative":90}],82:[function(require,module,exports){var SetCache=require("./_SetCache"),arraySome=require("./_arraySome"),cacheHas=require("./_cacheHas");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}module.exports=equalArrays},{"./_SetCache":15,"./_arraySome":29,"./_cacheHas":63}],83:[function(require,module,exports){var Symbol=require("./_Symbol"),Uint8Array=require("./_Uint8Array"),eq=require("./eq"),equalArrays=require("./_equalArrays"),mapToArray=require("./_mapToArray"),setToArray=require("./_setToArray");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}module.exports=equalByTag},{"./_Symbol":17,"./_Uint8Array":18,"./_equalArrays":82,"./_mapToArray":123,"./_setToArray":136,"./eq":148}],84:[function(require,module,exports){var getAllKeys=require("./_getAllKeys");var COMPARE_PARTIAL_FLAG=1;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}module.exports=equalObjects},{"./_getAllKeys":87}],85:[function(require,module,exports){var flatten=require("./flatten"),overRest=require("./_overRest"),setToString=require("./_setToString");function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}module.exports=flatRest},{"./_overRest":131,"./_setToString":137,"./flatten":149}],86:[function(require,module,exports){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],87:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbols=require("./_getSymbols"),keys=require("./keys");function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}module.exports=getAllKeys},{"./_baseGetAllKeys":41,"./_getSymbols":93,"./keys":165}],88:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbolsIn=require("./_getSymbolsIn"),keysIn=require("./keysIn");function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}module.exports=getAllKeysIn},{"./_baseGetAllKeys":41,"./_getSymbolsIn":94,"./keysIn":166}],89:[function(require,module,exports){var isKeyable=require("./_isKeyable");function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},{"./_isKeyable":110}],90:[function(require,module,exports){var baseIsNative=require("./_baseIsNative"),getValue=require("./_getValue");function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},{"./_baseIsNative":47,"./_getValue":96}],91:[function(require,module,exports){var overArg=require("./_overArg");var getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},{"./_overArg":130}],92:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":17}],93:[function(require,module,exports){var arrayFilter=require("./_arrayFilter"),stubArray=require("./stubArray");var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};module.exports=getSymbols},{"./_arrayFilter":24,"./stubArray":172}],94:[function(require,module,exports){var arrayPush=require("./_arrayPush"),getPrototype=require("./_getPrototype"),getSymbols=require("./_getSymbols"),stubArray=require("./stubArray");var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};module.exports=getSymbolsIn},{"./_arrayPush":27,"./_getPrototype":91,"./_getSymbols":93,"./stubArray":172}],95:[function(require,module,exports){var DataView=require("./_DataView"),Map=require("./_Map"),Promise=require("./_Promise"),Set=require("./_Set"),WeakMap=require("./_WeakMap"),baseGetTag=require("./_baseGetTag"),toSource=require("./_toSource");var mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}module.exports=getTag},{"./_DataView":8,"./_Map":11,"./_Promise":13,"./_Set":14,"./_WeakMap":19,"./_baseGetTag":42,"./_toSource":146}],96:[function(require,module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},{}],97:[function(require,module,exports){var castPath=require("./_castPath"),isArguments=require("./isArguments"),isArray=require("./isArray"),isIndex=require("./_isIndex"),isLength=require("./isLength"),toKey=require("./_toKey");function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}module.exports=hasPath},{"./_castPath":64,"./_isIndex":107,"./_toKey":145,"./isArguments":152,"./isArray":153,"./isLength":159}],98:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},{"./_nativeCreate":125}],99:[function(require,module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},{}],100:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},{"./_nativeCreate":125}],101:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},{"./_nativeCreate":125}],102:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},{"./_nativeCreate":125}],103:[function(require,module,exports){var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}module.exports=initCloneArray},{}],104:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer"),cloneDataView=require("./_cloneDataView"),cloneMap=require("./_cloneMap"),cloneRegExp=require("./_cloneRegExp"),cloneSet=require("./_cloneSet"),cloneSymbol=require("./_cloneSymbol"),cloneTypedArray=require("./_cloneTypedArray");var boolTag="[object Boolean]",dateTag="[object Date]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}module.exports=initCloneByTag},{"./_cloneArrayBuffer":65,"./_cloneDataView":67,"./_cloneMap":68,"./_cloneRegExp":69,"./_cloneSet":70,"./_cloneSymbol":71,"./_cloneTypedArray":72}],105:[function(require,module,exports){var baseCreate=require("./_baseCreate"),getPrototype=require("./_getPrototype"),isPrototype=require("./_isPrototype");function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}module.exports=initCloneObject},{"./_baseCreate":37,"./_getPrototype":91,"./_isPrototype":112}],106:[function(require,module,exports){var Symbol=require("./_Symbol"),isArguments=require("./isArguments"),isArray=require("./isArray");var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}module.exports=isFlattenable},{"./_Symbol":17,"./isArguments":152,"./isArray":153}],107:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},{}],108:[function(require,module,exports){var eq=require("./eq"),isArrayLike=require("./isArrayLike"),isIndex=require("./_isIndex"),isObject=require("./isObject");function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}module.exports=isIterateeCall},{"./_isIndex":107,"./eq":148,"./isArrayLike":154,"./isObject":160}],109:[function(require,module,exports){var isArray=require("./isArray"),isSymbol=require("./isSymbol");var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},{"./isArray":153,"./isSymbol":163}],110:[function(require,module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},{}],111:[function(require,module,exports){var coreJsData=require("./_coreJsData");var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},{"./_coreJsData":77}],112:[function(require,module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},{}],113:[function(require,module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},{}],114:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},{"./_assocIndexOf":32}],115:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},{"./_assocIndexOf":32}],116:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},{"./_assocIndexOf":32}],117:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},{"./_assocIndexOf":32}],118:[function(require,module,exports){var Hash=require("./_Hash"),ListCache=require("./_ListCache"),Map=require("./_Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},{"./_Hash":9,"./_ListCache":10,"./_Map":11}],119:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},{"./_getMapData":89}],120:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},{"./_getMapData":89}],
121:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},{"./_getMapData":89}],122:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},{"./_getMapData":89}],123:[function(require,module,exports){function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}module.exports=mapToArray},{}],124:[function(require,module,exports){var memoize=require("./memoize");var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},{"./memoize":168}],125:[function(require,module,exports){var getNative=require("./_getNative");var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":90}],126:[function(require,module,exports){var overArg=require("./_overArg");var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},{"./_overArg":130}],127:[function(require,module,exports){function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}module.exports=nativeKeysIn},{}],128:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},{"./_freeGlobal":86}],129:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],130:[function(require,module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},{}],131:[function(require,module,exports){var apply=require("./_apply");var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}module.exports=overRest},{"./_apply":22}],132:[function(require,module,exports){var baseGet=require("./_baseGet"),baseSlice=require("./_baseSlice");function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}module.exports=parent},{"./_baseGet":40,"./_baseSlice":58}],133:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":86}],134:[function(require,module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}module.exports=setCacheAdd},{}],135:[function(require,module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},{}],136:[function(require,module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},{}],137:[function(require,module,exports){var baseSetToString=require("./_baseSetToString"),shortOut=require("./_shortOut");var setToString=shortOut(baseSetToString);module.exports=setToString},{"./_baseSetToString":57,"./_shortOut":138}],138:[function(require,module,exports){var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}module.exports=shortOut},{}],139:[function(require,module,exports){var ListCache=require("./_ListCache");function stackClear(){this.__data__=new ListCache;this.size=0}module.exports=stackClear},{"./_ListCache":10}],140:[function(require,module,exports){function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}module.exports=stackDelete},{}],141:[function(require,module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},{}],142:[function(require,module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},{}],143:[function(require,module,exports){var ListCache=require("./_ListCache"),Map=require("./_Map"),MapCache=require("./_MapCache");var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}module.exports=stackSet},{"./_ListCache":10,"./_Map":11,"./_MapCache":12}],144:[function(require,module,exports){var memoizeCapped=require("./_memoizeCapped");var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},{"./_memoizeCapped":124}],145:[function(require,module,exports){var isSymbol=require("./isSymbol");var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},{"./isSymbol":163}],146:[function(require,module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},{}],147:[function(require,module,exports){function constant(value){return function(){return value}}module.exports=constant},{}],148:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],149:[function(require,module,exports){var baseFlatten=require("./_baseFlatten");function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}module.exports=flatten},{"./_baseFlatten":38}],150:[function(require,module,exports){var baseHasIn=require("./_baseHasIn"),hasPath=require("./_hasPath");function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}module.exports=hasIn},{"./_baseHasIn":43,"./_hasPath":97}],151:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],152:[function(require,module,exports){var baseIsArguments=require("./_baseIsArguments"),isObjectLike=require("./isObjectLike");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},{"./_baseIsArguments":44,"./isObjectLike":161}],153:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],154:[function(require,module,exports){var isFunction=require("./isFunction"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},{"./isFunction":158,"./isLength":159}],155:[function(require,module,exports){var isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}module.exports=isArrayLikeObject},{"./isArrayLike":154,"./isObjectLike":161}],156:[function(require,module,exports){var root=require("./_root"),stubFalse=require("./stubFalse");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer},{"./_root":133,"./stubFalse":173}],157:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual");function isEqual(value,other){return baseIsEqual(value,other)}module.exports=isEqual},{"./_baseIsEqual":45}],158:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},{"./_baseGetTag":42,"./isObject":160}],159:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],160:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],161:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],162:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),getPrototype=require("./_getPrototype"),isObjectLike=require("./isObjectLike");var objectTag="[object Object]";var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectCtorString=funcToString.call(Object);function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}module.exports=isPlainObject},{"./_baseGetTag":42,"./_getPrototype":91,"./isObjectLike":161}],163:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},{"./_baseGetTag":42,"./isObjectLike":161}],164:[function(require,module,exports){var baseIsTypedArray=require("./_baseIsTypedArray"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},{"./_baseIsTypedArray":48,"./_baseUnary":61,"./_nodeUtil":128}],165:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeys=require("./_baseKeys"),isArrayLike=require("./isArrayLike");function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=keys},{"./_arrayLikeKeys":25,"./_baseKeys":49,"./isArrayLike":154}],166:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeysIn=require("./_baseKeysIn"),isArrayLike=require("./isArrayLike");function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}module.exports=keysIn},{"./_arrayLikeKeys":25,"./_baseKeysIn":50,"./isArrayLike":154}],167:[function(require,module,exports){function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}module.exports=last},{}],168:[function(require,module,exports){var MapCache=require("./_MapCache");var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},{"./_MapCache":12}],169:[function(require,module,exports){var baseMerge=require("./_baseMerge"),createAssigner=require("./_createAssigner");var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});module.exports=mergeWith},{"./_baseMerge":51,"./_createAssigner":78}],170:[function(require,module,exports){var arrayMap=require("./_arrayMap"),baseClone=require("./_baseClone"),baseUnset=require("./_baseUnset"),castPath=require("./_castPath"),copyObject=require("./_copyObject"),customOmitClone=require("./_customOmitClone"),flatRest=require("./_flatRest"),getAllKeysIn=require("./_getAllKeysIn");var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});module.exports=omit},{"./_arrayMap":26,"./_baseClone":36,"./_baseUnset":62,"./_castPath":64,"./_copyObject":74,"./_customOmitClone":80,"./_flatRest":85,"./_getAllKeysIn":88}],171:[function(require,module,exports){var basePick=require("./_basePick"),flatRest=require("./_flatRest");var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});module.exports=pick},{"./_basePick":53,"./_flatRest":85}],172:[function(require,module,exports){function stubArray(){return[]}module.exports=stubArray},{}],173:[function(require,module,exports){function stubFalse(){return false}module.exports=stubFalse},{}],174:[function(require,module,exports){var copyObject=require("./_copyObject"),keysIn=require("./keysIn");function toPlainObject(value){return copyObject(value,keysIn(value))}module.exports=toPlainObject},{"./_copyObject":74,"./keysIn":166}],175:[function(require,module,exports){var baseToString=require("./_baseToString");function toString(value){return value==null?"":baseToString(value)}module.exports=toString},{"./_baseToString":60}],176:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],177:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],178:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var IS_DEV=typeof process!=="undefined"&&process.env&&process.env.NODE_ENV!=="production";var HAS_CONSOLE=typeof console!="undefined"&&typeof console.log=="function"&&typeof console.warn=="function"&&typeof console.error=="function";function log(level,message){if(!IS_DEV){return}if(HAS_CONSOLE){var _console;for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}(_console=console)[level].apply(_console,[message].concat(args))}}function error(message){if(HAS_CONSOLE){var _console2;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}(_console2=console).error.apply(_console2,[message].concat(args))}}function warn(message){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3]}log.apply(undefined,["warn","Warning: "+message].concat(args))}function deprecate(version,message){for(var _len4=arguments.length,args=Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++){args[_key4-2]=arguments[_key4]}log.apply(undefined,["warn","Deprecation ("+version+"): "+message].concat(args))}exports.default={deprecate:deprecate,error:error,warn:warn}}).call(this,require("_process"))},{_process:177}],179:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Changes={},PROXY_TRANSFORMS=["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlock","setInline","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(a){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var l=a.value.selection;a[e+"AtRange"].apply(a,[l].concat(n))}}),Changes.addMark=function(e,a){a=_mark2.default.create(a);var t=e.value,n=t.document,r=t.selection;if(r.isExpanded)e.addMarkAtRange(r,a);else if(r.marks){var l=r.marks.add(a),s=r.set("marks",l);e.select(s)}else{var o=n.getActiveMarksAtRange(r).add(a),i=r.set("marks",o);e.select(i)}},Changes.addMarks=function(e,a){a.forEach(function(a){return e.addMark(a)})},Changes.delete=function(e){var a=e.value.selection;e.deleteAtRange(a),e.collapseToStart()},Changes.insertBlock=function(e,a){a=_block2.default.create(a);var t=e.value.selection;e.insertBlockAtRange(t,a);var n=e.value.document.getNode(a.key);n&&e.collapseToEndOf(n)},Changes.insertFragment=function(e,a){if(a.nodes.size){var t=e.value,n=t,r=n.document,l=n.selection,s=t,o=s.startText,i=s.endText,c=s.startInline,d=a.getLastText(),u=a.getClosestInline(d.key),k=r.getTexts().map(function(e){return e.key}),v=!c||l.hasEdgeAtStartOf(o)||l.hasEdgeAtEndOf(i);e.insertFragmentAtRange(l,a);var g=(r=(t=e.value).document).getTexts().filter(function(e){return!k.includes(e.key)}),f=v?g.last():g.takeLast(2).first();f&&u?e.select(l.collapseToEndOf(f)):f?e.select(l.collapseToStartOf(f).move(d.text.length)):e.select(l.collapseToStart().move(d.text.length))}},Changes.insertInline=function(e,a){a=_inline2.default.create(a);var t=e.value.selection;e.insertInlineAtRange(t,a);var n=e.value.document.getNode(a.key);n&&e.collapseToEndOf(n)},Changes.insertText=function(e,a,t){var n=e.value,r=n.document,l=n.selection;t=t||n.marks,e.insertTextAtRange(l,a,t),l.marks&&r!=e.value.document&&e.select({marks:null})},Changes.splitBlock=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.value.selection;e.splitBlockAtRange(t,a).collapseToEnd()},Changes.removeMark=function(e,a){a=_mark2.default.create(a);var t=e.value,n=t.document,r=t.selection;if(r.isExpanded)e.removeMarkAtRange(r,a);else if(r.marks){var l=r.marks.remove(a),s=r.set("marks",l);e.select(s)}else{var o=n.getActiveMarksAtRange(r).remove(a),i=r.set("marks",o);e.select(i)}},Changes.toggleMark=function(e,a){a=_mark2.default.create(a),e.value.activeMarks.has(a)?e.removeMark(a):e.addMark(a)},Changes.wrapText=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,n=e.value.selection;e.wrapTextAtRange(n,a,t),n.isCollapsed&&e.moveStart(0-a.length),e.moveEnd(0-t.length),n.isForward!=e.value.selection.isForward&&e.flip()},exports.default=Changes},{"../models/block":191,"../models/inline":197,"../models/mark":199}],180:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,_block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_string=require("../utils/string"),_string2=_interopRequireDefault(_string);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Changes={};Changes.addMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.value.document,s=t.startKey,l=t.startOffset,d=t.endKey,y=t.endOffset;i.getTextsAtRange(t).forEach(function(t){var o=t.key,r=0,i=t.text.length;o==s&&(r=l),o==d&&(i=y),o==s&&o==d&&(i=y-l),e.addMarkByKey(o,r,i,n,{normalize:a})})}},Changes.addMarksAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.forEach(function(n){return e.addMarkAtRange(t,n,o)})},Changes.deleteAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){e.snapshotSelection();var o=n.normalize,r=void 0===o||o,a=e.value,i=t.startKey,s=t.startOffset,l=t.endKey,d=t.endOffset,y=a.document,f=y.hasVoidParent(i),g=y.hasVoidParent(l),c=y.getClosestBlock(i),u=y.getClosestBlock(l),k=0==s&&0==d&&0==f&&i==c.getFirstText().key&&l==u.getFirstText().key;if(k&&g){var v=y.getPreviousText(l);l=v.key,d=v.text.length,g=y.hasVoidParent(l)}for(;f;){var m=y.getClosestVoid(i),h=y.getNextText(i);if(e.removeNodeByKey(m.key,{normalize:!1}),i==l)return;if(!h)return;y=e.value.document,i=h.key,s=0,f=y.hasVoidParent(i)}for(;g;){var B=y.getClosestVoid(l),z=y.getPreviousText(l);e.removeNodeByKey(B.key,{normalize:!1}),y=e.value.document,l=z.key,d=z.text.length,g=y.hasVoidParent(l)}if(i==l&&k)e.removeNodeByKey(c.key,{normalize:r});else if(i!=l){c=y.getClosestBlock(i),u=y.getClosestBlock(l);var K=y.getNode(i),A=y.getNode(l),C=K.text.length-s,x=d,N=y.getCommonAncestor(i,l),p=N.getFurthestAncestor(i),O=N.getFurthestAncestor(l),R=y.getParent(c.key),E=R.nodes.indexOf(c),_=R.nodes.indexOf(u),V=void 0;for(V=K;V.key!=p.key;){var T=y.getParent(V.key),D=T.nodes.indexOf(V);T.nodes.slice(D+1).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),V=T}var w=N.nodes.indexOf(p),F=N.nodes.indexOf(O);for(N.nodes.slice(w+1,F).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),V=A;V.key!=O.key;){var P=y.getParent(V.key),S=P.nodes.indexOf(V);P.nodes.slice(0,S).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),V=P}if(0!=C&&e.removeTextByKey(i,s,C,{normalize:!1}),0!=x&&e.removeTextByKey(l,0,d,{normalize:!1}),c.key!=u.key){var b=(y=e.value.document).getFurthestOnlyChildAncestor(u.key);_!=E+1&&e.moveNodeByKey(u.key,R.key,E+1,{normalize:!1}),k?e.removeNodeByKey(c.key,{normalize:!1}):e.mergeNodeByKey(u.key,{normalize:!1}),b&&e.removeNodeByKey(b.key,{normalize:!1})}r&&e.normalizeNodeByKey(N.key)}else{var I=s,q=d-s;e.removeTextByKey(i,I,q,{normalize:r})}}},Changes.deleteCharBackwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r),s=i.getOffset(r)+a,l=i.text,d=_string2.default.getCharOffsetBackward(l,s);e.deleteBackwardAtRange(t,d,n)},Changes.deleteLineBackwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r),s=i.getOffset(r),l=i.nodes.size>1&&""==i.nodes.get(0).text&&"inline"==i.nodes.get(1).kind,d=s+a;l&&(d-=1),e.deleteBackwardAtRange(t,d,n),l&&e.deleteBackward()},Changes.deleteWordBackwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r),s=i.getOffset(r)+a,l=i.text,d=_string2.default.getWordOffsetBackward(l,s);e.deleteBackwardAtRange(t,d,n)},Changes.deleteBackwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o,a=e.value.document,i=t,s=i.startKey,l=i.focusOffset;if(t.isExpanded)e.deleteAtRange(t,{normalize:r});else{var d=a.getClosestBlock(s);if(d&&d.isVoid)e.removeNodeByKey(d.key,{normalize:r});else if(d&&!d.isVoid&&d.isEmpty&&1!==a.nodes.size)e.removeNodeByKey(d.key,{normalize:r});else{var y=a.getClosestInline(s);if(y&&y.isVoid)e.removeNodeByKey(y.key,{normalize:r});else if(!t.isAtStartOf(a)){var f=a.getDescendant(s);if(t.isAtStartOf(f)){var g=a.getPreviousText(f.key),c=a.getClosestBlock(g.key),u=a.getClosestInline(g.key);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:r});if(u&&u.isVoid)return void e.removeNodeByKey(u.key,{normalize:r});if(1==n&&c!=d)return t=t.merge({anchorKey:g.key,anchorOffset:g.text.length}),void e.deleteAtRange(t,{normalize:r})}if(n<l)return t=t.merge({focusOffset:l-n,isBackward:!0}),void e.deleteAtRange(t,{normalize:r});for(var k=f,v=0,m=l;n>m;){var h=m+(k=a.getPreviousText(k.key)).text.length;if(n<=h){v=h-n;break}m=h}if(a.hasVoidParent(k.key)){var B=a.getClosestVoid(k.key);k=a.getNextText(B.key),v=0}t=t.merge({focusKey:k.key,focusOffset:v,isBackward:!0}),e.deleteAtRange(t,{normalize:r})}}}},Changes.deleteCharForwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r),s=i.getOffset(r)+a,l=i.text,d=_string2.default.getCharOffsetForward(l,s);e.deleteForwardAtRange(t,d,n)},Changes.deleteLineForwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r).getOffset(r)+a;e.deleteForwardAtRange(t,i,n)},Changes.deleteWordForwardAtRange=function(e,t,n){var o=e.value.document,r=t.startKey,a=t.startOffset,i=o.getClosestBlock(r),s=i.getOffset(r)+a,l=i.text,d=_string2.default.getWordOffsetForward(l,s);e.deleteForwardAtRange(t,d,n)},Changes.deleteForwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o,a=e.value.document,i=t,s=i.startKey,l=i.focusOffset;if(t.isExpanded)e.deleteAtRange(t,{normalize:r});else{var d=a.getClosestBlock(s);if(d&&d.isVoid)e.removeNodeByKey(d.key,{normalize:r});else{if(d&&!d.isVoid&&d.isEmpty&&1!==a.nodes.size){var y=a.getNextBlock(d.key);return e.removeNodeByKey(d.key,{normalize:r}),void(y&&y.key&&e.moveToStartOf(y))}var f=a.getClosestInline(s);if(f&&f.isVoid)e.removeNodeByKey(f.key,{normalize:r});else if(!t.isAtEndOf(a)){var g=a.getDescendant(s);if(t.isAtEndOf(g)){var c=a.getNextText(g.key),u=a.getClosestBlock(c.key),k=a.getClosestInline(c.key);if(u&&u.isVoid)return void e.removeNodeByKey(u.key,{normalize:r});if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:r});if(1==n&&u!=d)return t=t.merge({focusKey:c.key,focusOffset:0}),void e.deleteAtRange(t,{normalize:r})}if(n<=g.text.length-l)return t=t.merge({focusOffset:l+n}),void e.deleteAtRange(t,{normalize:r});for(var v=g,m=l,h=g.text.length-l;n>h;){var B=h+(v=a.getNextText(v.key)).text.length
;if(n<=B){m=n-h;break}h=B}if(a.hasVoidParent(v.key)){var z=a.getClosestVoid(v.key);m=(v=a.getPreviousText(z.key)).text.length}t=t.merge({focusKey:v.key,focusOffset:m}),e.deleteAtRange(t,{normalize:r})}}}},Changes.insertBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_block2.default.create(n);var r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t),t=t.collapseToStart());var i=e.value.document,s=t,l=s.startKey,d=s.startOffset,y=i.getClosestBlock(l),f=i.getParent(y.key),g=f.nodes.indexOf(y);if(y.isVoid){var c=t.isAtEndOf(y)?1:0;e.insertNodeByKey(f.key,g+c,n,{normalize:a})}else y.isEmpty?e.insertNodeByKey(f.key,g+1,n,{normalize:a}):t.isAtStartOf(y)?e.insertNodeByKey(f.key,g,n,{normalize:a}):t.isAtEndOf(y)?e.insertNodeByKey(f.key,g+1,n,{normalize:a}):(e.splitDescendantsByKey(y.key,l,d,{normalize:!1}),e.insertNodeByKey(f.key,g+1,n,{normalize:a}));a&&e.normalizeNodeByKey(f.key)},Changes.insertFragmentAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;if(t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart()),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var i=t,s=i.startKey,l=i.startOffset,d=e.value.document,y=d.getDescendant(s),f=d.getClosestBlock(y.key),g=f.getFurthestAncestor(y.key),c=t.isAtStartOf(f),u=d.getParent(f.key),k=u.nodes.indexOf(f),v=n.getBlocks(),m=v.first(),h=v.last();if(m==h&&m.isVoid)e.insertBlockAtRange(t,m,o);else{if(m!=h){var B=n.getFurthest(m.key,function(e){return 1==e.nodes.size})||m,z=u.nodes.indexOf(f);(n=n.removeDescendant(B.key)).nodes.forEach(function(t,n){var o=z+n+1;e.insertNodeByKey(u.key,o,t,{normalize:!1})})}if(0!=l&&e.splitDescendantsByKey(g.key,s,l,{normalize:!1}),y=(d=e.value.document).getDescendant(s),g=(f=d.getClosestBlock(s)).getFurthestAncestor(y.key),m!=h){var K=c?g:f.getNextSibling(g.key),A=K?f.nodes.skipUntil(function(e){return e.key==K.key}):(0,_immutable.List)(),C=h.nodes.size;A.forEach(function(t,n){var o=C+n;e.moveNodeByKey(t.key,h.key,o,{normalize:!1})})}if(f.isEmpty)e.removeNodeByKey(f.key,{normalize:!1}),e.insertNodeByKey(u.key,k,m,{normalize:!1});else{var x=f.getFurthestAncestor(y.key),N=f.nodes.indexOf(x);m.nodes.forEach(function(t,n){var o=N+n+(0==l?0:1);e.insertNodeByKey(f.key,o,t,{normalize:!1})})}a&&e.normalizeNodeByKey(u.key)}}},Changes.insertInlineAtRange=function(e,t,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o;n=_inline2.default.create(n),t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart());var a=e.value.document,i=t,s=i.startKey,l=i.startOffset,d=a.getParent(s),y=a.assertDescendant(s),f=d.nodes.indexOf(y);d.isVoid||(e.splitNodeByKey(s,l,{normalize:!1}),e.insertNodeByKey(d.key,f+1,n,{normalize:!1}),r&&e.normalizeNodeByKey(d.key))},Changes.insertTextAtRange=function(e,t,n,o){var r=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,a=e.value.document,i=t.startKey,s=i,l=t.startOffset;a.getParent(i).isVoid||(t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),s=e.value.startKey,l=e.value.startOffset),void 0!==r&&(r=t.isExpanded),e.insertTextByKey(s,l,n,o,{normalize:r}))},Changes.removeMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.value.document.getTextsAtRange(t),s=t.startKey,l=t.startOffset,d=t.endKey,y=t.endOffset;i.forEach(function(t){var o=t.key,r=0,i=t.text.length;o==s&&(r=l),o==d&&(i=y),o==s&&o==d&&(i=y-l),e.removeMarkByKey(o,r,i,n,{normalize:a})})}},Changes.setBlockAtRange=function(e,t,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o;e.value.document.getBlocksAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:r})})},Changes.setInlineAtRange=function(e,t,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o;e.value.document.getInlinesAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:r})})},Changes.splitBlockAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o;t.isExpanded&&(e.deleteAtRange(t,{normalize:r}),t=t.collapseToStart());for(var a=t,i=a.startKey,s=a.startOffset,l=e.value.document,d=l.assertDescendant(i),y=l.getClosestBlock(d.key),f=0;y&&"block"==y.kind&&f<n;)d=y,y=l.getClosestBlock(y.key),f++;e.splitDescendantsByKey(d.key,i,s,{normalize:r})},Changes.splitInlineAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).normalize,r=void 0===o||o;t.isExpanded&&(e.deleteAtRange(t,{normalize:r}),t=t.collapseToStart());for(var a=t,i=a.startKey,s=a.startOffset,l=e.value.document,d=l.assertDescendant(i),y=l.getClosestInline(d.key),f=0;y&&"inline"==y.kind&&f<n;)d=y,y=l.getClosestInline(y.key),f++;e.splitDescendantsByKey(d.key,i,s,{normalize:r})},Changes.toggleMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){n=_mark2.default.create(n);var r=o.normalize,a=void 0===r||r;e.value.document.getActiveMarksAtRange(t).some(function(e){return e.equals(n)})?e.removeMarkAtRange(t,n,{normalize:a}):e.addMarkAtRange(t,n,{normalize:a})}},Changes.unwrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.value.document,s=i.getBlocksAtRange(t);s.map(function(e){return i.getClosest(e.key,function(e){return"block"==e.kind&&((null==n.type||e.type==n.type)&&((null==n.isVoid||e.isVoid==n.isVoid)&&!(null!=n.data&&!e.data.isSuperset(n.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=t.nodes.first(),o=t.nodes.last(),r=i.getParent(t.key),a=r.nodes.indexOf(t),l=t.nodes.filter(function(e){return s.some(function(t){return e==t||e.hasDescendant(t.key)})}),d=l.first(),y=l.last();if(n==d&&o==y)t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})}),e.removeNodeByKey(t.key,{normalize:!1});else if(o==y)t.nodes.skipUntil(function(e){return e==d}).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})});else if(n==d)t.nodes.takeUntil(function(e){return e==y}).push(y).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})});else{var f=d.getFirstText();e.splitDescendantsByKey(t.key,f.key,0,{normalize:!1}),i=e.value.document,l.forEach(function(t,n){if(0==n){var o=t;t=i.getNextBlock(t.key),e.removeNodeByKey(o.key,{normalize:!1})}e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})})}}),a&&e.normalizeDocument()},Changes.unwrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.value.document;i.getTextsAtRange(t).map(function(e){return i.getClosest(e.key,function(e){return"inline"==e.kind&&((null==n.type||e.type==n.type)&&((null==n.isVoid||e.isVoid==n.isVoid)&&!(null!=n.data&&!e.data.isSuperset(n.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=e.value.document.getParent(t.key),o=n.nodes.indexOf(t);t.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,n.key,o+r,{normalize:!1})})}),a&&e.normalizeDocument()},Changes.wrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=(n=_block2.default.create(n)).set("nodes",n.nodes.clear());var r=o.normalize,a=void 0===r||r,i=e.value.document,s=i.getBlocksAtRange(t),l=s.first(),d=s.last(),y=void 0,f=void 0,g=void 0;if(1===s.length?(y=i.getParent(l.key),f=s):y=i.getClosest(l.key,function(e){return!!i.getClosest(d.key,function(t){return e==t})}),null==y&&(y=i),null==f){var c=y.nodes.reduce(function(e,t,n){return(t==l||t.hasDescendant(l.key))&&(e[0]=n),(t==d||t.hasDescendant(d.key))&&(e[1]=n),e},[]);g=c[0],f=y.nodes.slice(c[0],c[1]+1)}null==g&&(g=y.nodes.indexOf(f.first())),e.insertNodeByKey(y.key,g,n,{normalize:!1}),f.forEach(function(t,o){e.moveNodeByKey(t.key,n.key,o,{normalize:!1})}),a&&e.normalizeNodeByKey(y.key)},Changes.wrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.value.document,a=o.normalize,i=void 0===a||a,s=t.startKey,l=t.startOffset,d=t.endKey,y=t.endOffset;if(t.isCollapsed){var f=r.getClosestInline(s);if(!f.isVoid)return;return e.wrapInlineByKey(f.key,n,o)}n=(n=_inline2.default.create(n)).set("nodes",n.nodes.clear());var g=r.getBlocksAtRange(t),c=r.getClosestBlock(s),u=r.getClosestBlock(d),k=c.getFurthestAncestor(s),v=u.getFurthestAncestor(d);e.splitDescendantsByKey(v.key,d,y,{normalize:!1}),e.splitDescendantsByKey(k.key,s,l,{normalize:!1}),c=(r=e.value.document).getDescendant(c.key),u=r.getDescendant(u.key),k=c.getFurthestAncestor(s),v=u.getFurthestAncestor(d);var m=c.nodes.indexOf(k),h=u.nodes.indexOf(v);if(c==u){k=(c=(r=e.value.document).getClosestBlock(s)).getFurthestAncestor(s);var B=r.getNextSibling(k.key),z=c.nodes.indexOf(B),K=s==d?B:c.getFurthestAncestor(d),A=c.nodes.skipUntil(function(e){return e==B}).takeUntil(function(e){return e==K}).push(K),C=n.regenerateKey();e.insertNodeByKey(c.key,z,C,{normalize:!1}),A.forEach(function(t,n){e.moveNodeByKey(t.key,C.key,n,{normalize:!1})}),i&&e.normalizeNodeByKey(c.key)}else{var x=c.nodes.slice(m+1),N=u.nodes.slice(0,h+1),p=n.regenerateKey(),O=n.regenerateKey();e.insertNodeByKey(c.key,m+1,p,{normalize:!1}),e.insertNodeByKey(u.key,h,O,{normalize:!1}),x.forEach(function(t,n){e.moveNodeByKey(t.key,p.key,n,{normalize:!1})}),N.forEach(function(t,n){e.moveNodeByKey(t.key,O.key,n,{normalize:!1})}),i&&e.normalizeNodeByKey(c.key).normalizeNodeByKey(u.key),g.slice(1,-1).forEach(function(t){var o=n.regenerateKey();e.insertNodeByKey(t.key,0,o,{normalize:!1}),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,o.key,n,{normalize:!1})}),i&&e.normalizeNodeByKey(t.key)})}},Changes.wrapTextAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,r=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,a=void 0===r||r,i=t.startKey,s=t.endKey,l=t.collapseToStart(),d=t.collapseToEnd();i==s&&(d=d.move(n.length)),e.insertTextAtRange(l,n,[],{normalize:a}),e.insertTextAtRange(d,o,[],{normalize:a})},exports.default=Changes},{"../models/block":191,"../models/inline":197,"../models/mark":199,"../models/node":200,"../utils/string":213}],181:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Changes={};Changes.addMarkByKey=function(e,t,n,a,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};o=_mark2.default.create(o);var i=r.normalize,l=void 0===i||i,y=e.value,d=y.document,s=d.getPath(t),v=[],u=n,m=n+a,g=0;if(d.getNode(t).getLeaves().forEach(function(e){var t=g,n=t+e.text.length;if(g+=e.text.length,!(n<u||m<t||e.marks.has(o))){var a=Math.max(t,u),r=Math.min(n,m);v.push({type:"add_mark",value:y,path:s,offset:a,length:r-a,mark:o})}}),e.applyOperations(v),l){var h=d.getParent(t);e.normalizeNodeByKey(h.key)}},Changes.insertFragmentByKey=function(e,t,n,a){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,r=void 0===o||o;a.nodes.forEach(function(a,o){e.insertNodeByKey(t,n+o,a)}),r&&e.normalizeNodeByKey(t)},Changes.insertNodeByKey=function(e,t,n,a){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,r=void 0===o||o,i=e.value,l=i.document.getPath(t);e.applyOperation({type:"insert_node",value:i,path:[].concat(_toConsumableArray(l),[n]),node:a}),r&&e.normalizeNodeByKey(t)},Changes.insertTextByKey=function(e,t,n,a,o){var r=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).normalize,i=void 0===r||r,l=e.value,y=l.document,d=y.getPath(t),s=y.getNode(t);if(o=o||s.getMarksAtIndex(n),e.applyOperation({type:"insert_text",value:l,path:d,offset:n,text:a,marks:o}),i){var v=y.getParent(t);e.normalizeNodeByKey(v.key)}},Changes.mergeNodeByKey=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).normalize,a=void 0===n||n,o=e.value,r=o.document,i=r.getPath(t),l=r.getPreviousSibling(t);if(!l)throw new Error('Unable to merge node with key "'+t+'", no previous key.');var y="text"==l.kind?l.text.length:l.nodes.size;if(e.applyOperation({type:"merge_node",value:o,path:i,position:y,target:null}),a){var d=r.getParent(t);e.normalizeNodeByKey(d.key)}},Changes.moveNodeByKey=function(e,t,n,a){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,r=void 0===o||o,i=e.value,l=i.document,y=l.getPath(t),d=l.getPath(n);if(e.applyOperation({type:"move_node",value:i,path:y,newPath:[].concat(_toConsumableArray(d),[a])}),r){var s=l.getCommonAncestor(t,n);e.normalizeNodeByKey(s.key)}},Changes.removeMarkByKey=function(e,t,n,a,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};o=_mark2.default.create(o);var i=r.normalize,l=void 0===i||i,y=e.value,d=y.document,s=d.getPath(t),v=[],u=n,m=n+a,g=0;if(d.getNode(t).getLeaves().forEach(function(e){var t=g,n=t+e.text.length;if(g+=e.text.length,!(n<u||m<t)&&e.marks.has(o)){var a=Math.max(t,u),r=Math.min(n,m);v.push({type:"remove_mark",value:y,path:s,offset:a,length:r-a,mark:o})}}),e.applyOperations(v),l){var h=d.getParent(t);e.normalizeNodeByKey(h.key)}},Changes.removeAllMarksByKey=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.state.document.getNode(t);("text"===a.kind?[a]:a.getTextsAsArray()).forEach(function(t){t.getMarksAsArray().forEach(function(a){e.removeMarkByKey(t.key,0,t.text.length,a,n)})})},Changes.removeNodeByKey=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).normalize,a=void 0===n||n,o=e.value,r=o.document,i=r.getPath(t),l=r.getNode(t);if(e.applyOperation({type:"remove_node",value:o,path:i,node:l}),a){var y=r.getParent(t);e.normalizeNodeByKey(y.key)}},Changes.removeTextByKey=function(e,t,n,a){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,r=void 0===o||o,i=e.value,l=i.document,y=l.getPath(t),d=l.getNode(t),s=d.getLeaves(),v=d.text,u=[],m=n,g=n+a,h=0;if(s.forEach(function(e){var t=h,n=t+e.text.length;if(h+=e.text.length,!(n<m||g<t)){var a=Math.max(t,m),o=Math.min(n,g),r=v.slice(a,o);u.push({type:"remove_text",value:i,path:y,offset:a,text:r,marks:e.marks})}}),e.applyOperations(u.reverse()),r){var c=l.getClosestBlock(t);e.normalizeNodeByKey(c.key)}},Changes.replaceNodeByKey=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.create(n);var o=a.normalize,r=void 0===o||o,i=e.value.document,l=i.getNode(t),y=i.getParent(t),d=y.nodes.indexOf(l);e.removeNodeByKey(t,{normalize:!1}),e.insertNodeByKey(y.key,d,n,a),r&&e.normalizeNodeByKey(y.key)},Changes.setMarkByKey=function(e,t,n,a,o,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};o=_mark2.default.create(o),r=_mark2.default.createProperties(r);var l=i.normalize,y=void 0===l||l,d=e.value,s=d.document,v=s.getPath(t);if(e.applyOperation({type:"set_mark",value:d,path:v,offset:n,length:a,mark:o,properties:r}),y){var u=s.getParent(t);e.normalizeNodeByKey(u.key)}},Changes.setNodeByKey=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var o=a.normalize,r=void 0===o||o,i=e.value,l=i.document,y=l.getPath(t),d=l.getNode(t);e.applyOperation({type:"set_node",value:i,path:y,node:d,properties:n}),r&&e.normalizeNodeByKey(d.key)},Changes.splitNodeByKey=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.normalize,r=void 0===o||o,i=a.target,l=void 0===i?null:i,y=e.value,d=y.document,s=d.getPath(t);if(e.applyOperation({type:"split_node",value:y,path:s,position:n,target:l}),r){var v=d.getParent(t);e.normalizeNodeByKey(v.key)}},Changes.splitDescendantsByKey=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t!=n){var r=o.normalize,i=void 0===r||r,l=e.value.document,y=l.getNode(n),d=void 0,s=void 0;if(l.getAncestors(n).skipUntil(function(e){return e.key==t}).reverse().unshift(y).forEach(function(t){var n=null==s?null:s;s=d?t.nodes.indexOf(d)+1:a,d=t,e.splitNodeByKey(t.key,s,{normalize:!1,target:n})}),i){var v=l.getParent(t);e.normalizeNodeByKey(v.key)}}else e.splitNodeByKey(n,a,o)},Changes.unwrapInlineByKey=function(e,t,n,a){var o=e.value,r=o.document,i=o.selection,l=r.assertDescendant(t),y=l.getFirstText(),d=l.getLastText(),s=i.moveToRangeOf(y,d);e.unwrapInlineAtRange(s,n,a)},Changes.unwrapBlockByKey=function(e,t,n,a){var o=e.value,r=o.document,i=o.selection,l=r.assertDescendant(t),y=l.getFirstText(),d=l.getLastText(),s=i.moveToRangeOf(y,d);e.unwrapBlockAtRange(s,n,a)},Changes.unwrapNodeByKey=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.normalize,o=void 0===a||a,r=e.value.document,i=r.getParent(t),l=i.getChild(t),y=i.nodes.indexOf(l),d=0===y,s=y===i.nodes.size-1,v=r.getParent(i.key),u=v.nodes.indexOf(i);1===i.nodes.size?(e.moveNodeByKey(t,v.key,u,{normalize:!1}),e.removeNodeByKey(i.key,n)):d?e.moveNodeByKey(t,v.key,u,n):s?e.moveNodeByKey(t,v.key,u+1,n):(e.splitNodeByKey(i.key,y,{normalize:!1}),e.moveNodeByKey(t,v.key,u+1,{normalize:!1}),o&&e.normalizeNodeByKey(v.key))},Changes.wrapBlockByKey=function(e,t,n,a){n=(n=_block2.default.create(n)).set("nodes",n.nodes.clear());var o=e.value.document,r=o.assertDescendant(t),i=o.getParent(r.key),l=i.nodes.indexOf(r);e.insertNodeByKey(i.key,l,n,{normalize:!1}),e.moveNodeByKey(r.key,n.key,0,a)},Changes.wrapInlineByKey=function(e,t,n,a){n=(n=_inline2.default.create(n)).set("nodes",n.nodes.clear());var o=e.value.document,r=o.assertDescendant(t),i=o.getParent(r.key),l=i.nodes.indexOf(r);e.insertNodeByKey(i.key,l,n,{normalize:!1}),e.moveNodeByKey(r.key,n.key,0,a)},Changes.wrapNodeByKey=function(e,t,n){"block"!=(n=(n=_node2.default.create(n)).set("nodes",n.nodes.clear())).kind?"inline"!=n.kind||e.wrapInlineByKey(t,n):e.wrapBlockByKey(t,n)},exports.default=Changes},{"../models/block":191,"../models/inline":197,"../models/mark":199,"../models/node":200}],182:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_atCurrentRange=require("./at-current-range"),_atCurrentRange2=_interopRequireDefault(_atCurrentRange),_atRange=require("./at-range"),_atRange2=_interopRequireDefault(_atRange),_byKey=require("./by-key"),_byKey2=_interopRequireDefault(_byKey),_onHistory=require("./on-history"),_onHistory2=_interopRequireDefault(_onHistory),_onSelection=require("./on-selection"),_onSelection2=_interopRequireDefault(_onSelection),_onValue=require("./on-value"),_onValue2=_interopRequireDefault(_onValue),_withSchema=require("./with-schema"),_withSchema2=_interopRequireDefault(_withSchema);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=_extends({},_atCurrentRange2.default,_atRange2.default,_byKey2.default,_onHistory2.default,_onSelection2.default,_onValue2.default,_withSchema2.default)},{"./at-current-range":179,"./at-range":180,"./by-key":181,"./on-history":183,"./on-selection":184,"./on-value":185,"./with-schema":186}],183:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _invert=require("../operations/invert"),_invert2=_interopRequireDefault(_invert),_omit=require("lodash/omit"),_omit2=_interopRequireDefault(_omit);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Changes={};Changes.redo=function(e){var t=e.value,r=t.history;if(r){var o=r,s=o.undos,i=o.redos,a=i.peek();a&&(i=i.pop(),s=s.push(a),a.forEach(function(t){var r=t,o=r.type,s=r.properties;"set_selection"==o&&(t=t.set("properties",(0,_omit2.default)(s,"isFocused"))),e.applyOperation(t,{save:!1})}),t=e.value,r=r.set("undos",s).set("redos",i),t=t.set("history",r),e.value=t)}},Changes.undo=function(e){var t=e.value,r=t.history;if(r){var o=r,s=o.undos,i=o.redos,a=s.peek();a&&(s=s.pop(),i=i.push(a),a.slice().reverse().map(_invert2.default).forEach(function(t){var r=t,o=r.type,s=r.properties;"set_selection"==o&&(t=t.set("properties",(0,_omit2.default)(s,"isFocused"))),e.applyOperation(t,{save:!1})}),t=e.value,r=r.set("undos",s).set("redos",i),t=t.set("history",r),e.value=t)}},exports.default=Changes},{"../operations/invert":209,"lodash/omit":170}],184:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,o){var t=[],a=!0,n=!1,r=void 0;try{for(var c,s=e[Symbol.iterator]();!(a=(c=s.next()).done)&&(t.push(c.value),!o||t.length!==o);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}return t}(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_isEmpty=require("is-empty"),_isEmpty2=_interopRequireDefault(_isEmpty),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),_range=require("../models/range"),_range2=_interopRequireDefault(_range);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Changes={};Changes.select=function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o=_range2.default.createProperties(o);var a=t.snapshot,n=void 0!==a&&a,r=e.value,c=r.document,s=r.selection,l={},u=s.toJSON(),f=s.merge(o).normalize(c);o=(0,_pick2.default)(f,Object.keys(o));for(var i in o)0==n&&o[i]==u[i]||(l[i]=o[i]);var v=["anchorKey","anchorOffset","focusKey","focusOffset"].some(function(e){return l.hasOwnProperty(e)});u.marks&&o.marks==u.marks&&v&&(l.marks=null),(0,_isEmpty2.default)(l)||e.applyOperation({type:"set_selection",value:r,properties:l,selection:u},n?{skip:!1,merge:!1}:{})},Changes.selectAll=function(e){var o=e.value,t=o.document,a=o.selection.moveToRangeOf(t);e.select(a)},Changes.snapshotSelection=function(e){var o=e.value.selection;e.select(o,{snapshot:!0})},Changes.moveAnchorCharBackward=function(e){var o=e.value,t=o.document,a=o.selection,n=o.anchorText,r=o.anchorBlock,c=a.anchorOffset,s=t.getPreviousText(n.key),l=t.hasVoidParent(n.key),u=s&&t.hasVoidParent(s.key);!l&&c>0?e.moveAnchor(-1):s&&(e.moveAnchorToEndOf(s),l||u||!r.hasNode(s.key)||e.moveAnchor(-1))},Changes.moveAnchorCharForward=function(e){var o=e.value,t=o.document,a=o.selection,n=o.anchorText,r=o.anchorBlock,c=a.anchorOffset,s=t.getNextText(n.key),l=t.hasVoidParent(n.key),u=s&&t.hasVoidParent(s.key);!l&&c<n.text.length?e.moveAnchor(1):s&&(e.moveAnchorToStartOf(s),l||u||!r.hasNode(s.key)||e.moveAnchor(1))},Changes.moveFocusCharBackward=function(e){var o=e.value,t=o.document,a=o.selection,n=o.focusText,r=o.focusBlock,c=a.focusOffset,s=t.getPreviousText(n.key),l=t.hasVoidParent(n.key),u=s&&t.hasVoidParent(s.key);!l&&c>0?e.moveFocus(-1):s&&(e.moveFocusToEndOf(s),l||u||!r.hasNode(s.key)||e.moveFocus(-1))},Changes.moveFocusCharForward=function(e){var o=e.value,t=o.document,a=o.selection,n=o.focusText,r=o.focusBlock,c=a.focusOffset,s=t.getNextText(n.key),l=t.hasVoidParent(n.key),u=s&&t.hasVoidParent(s.key);!l&&c<n.text.length?e.moveFocus(1):s&&(e.moveFocusToStartOf(s),l||u||!r.hasNode(s.key)||e.moveFocus(1))};var MOVE_DIRECTIONS=["Forward","Backward"];MOVE_DIRECTIONS.forEach(function(e){var o="moveAnchorChar"+e,t="moveFocusChar"+e;Changes["moveChar"+e]=function(e){e[o]()[t]()},Changes["moveStartChar"+e]=function(e){e.value.isBackward?e[t]():e[o]()},Changes["moveEndChar"+e]=function(e){e.value.isBackward?e[o]():e[t]()},Changes["extendChar"+e]=function(o){o["moveFocusChar"+e]()},Changes["collapseChar"+e]=function(o){o["Forward"==e?"collapseToEnd":"collapseToStart"]()["moveChar"+e]()}});var ALIAS_METHODS=[["collapseLineBackward","collapseToStartOfBlock"],["collapseLineForward","collapseToEndOfBlock"],["extendLineBackward","extendToStartOfBlock"],["extendLineForward","extendToEndOfBlock"]];ALIAS_METHODS.forEach(function(e){var o=_slicedToArray(e,2),t=o[0],a=o[1];Changes[t]=function(e){for(var o=arguments.length,t=Array(o>1?o-1:0),n=1;n<o;n++)t[n-1]=arguments[n];e[a].apply(e,[e].concat(t))}});var PROXY_TRANSFORMS=["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(o){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r="deselect"!=e,c=o.value,s=c.document,l=c.selection,u=l[e].apply(l,a);r&&(u=u.normalize(s)),o.select(u)}});var PREFIXES=["moveTo","moveAnchorTo","moveFocusTo","moveStartTo","moveEndTo","collapseTo","extendTo"],DIRECTIONS=["Next","Previous"],KINDS=["Block","Inline","Text"];PREFIXES.forEach(function(e){var o=["Start","End"];"moveTo"==e&&o.push("Range"),o.forEach(function(o){var t=""+e+o+"Of";KINDS.forEach(function(e){var o="Text"==e?"getNode":"getClosest"+e;Changes[""+t+e]=function(e){var a=e.value,n=a.document,r=a.selection,c=n[o](r.startKey);c&&e[t](c)},DIRECTIONS.forEach(function(a){var n="get"+a+e,r="Next"==a?"startKey":"endKey";Changes[""+t+a+e]=function(e){var a=e.value,c=a.document,s=a.selection,l=c[o](s[r]);if(l){var u=c[n](l.key);u&&e[t](u)}}})})})}),exports.default=Changes},{"../models/range":202,"is-empty":5,"lodash/pick":171}],185:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _value=require("../models/value"),_value2=_interopRequireDefault(_value);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Changes={};Changes.setValue=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=_value2.default.createProperties(a);var u=e.value;e.applyOperation({type:"set_value",properties:a,value:u},t)},exports.default=Changes},{"../models/value":206}],186:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,Changes={};function normalizeNodeAndChildren(e,n,o){if("text"!=n.kind){for(var i=n.nodes.toArray().map(function(e){return e.key}),a=e.operations.size,r=void 0,t=new _immutable.Set;r=i[0];){t=t.add(r),i.shift();var d=n.getChild(r);if(d&&(normalizeNodeAndChildren(e,d,o),e.operations.size>a)){if(a=e.operations.size,!(n=refindNode(e,n)))break;n.nodes.forEach(function(e){t.has(e.key)||i.unshift(e.key)})}}n&&normalizeNode(e,n,o)}else normalizeNode(e,n,o)}function refindNode(e,n){var o=e.value.document;return"document"==n.kind?o:o.getDescendant(n.key)}function normalizeNode(e,n,o){var i=o.stack.plugins.length+1,a=0;!function e(n,r){var t=r.validate(o);if(t&&(t(n),r=refindNode(n,r))){if(++a>i)throw new Error("A schema rule could not be validated after sufficient iterations. This is usually due to a `rule.validate` or `rule.normalize` function of a schema being incorrectly written, causing an infinite loop.");e(n,r)}}(e,n)}Changes.normalize=function(e){e.normalizeDocument()},Changes.normalizeDocument=function(e){var n=e.value.document;e.normalizeNodeByKey(n.key)},Changes.normalizeNodeByKey=function(e,n){var o=e.value,i=o.document,a=o.schema,r=i.assertNode(n);normalizeNodeAndChildren(e,r,a);var t=(i=e.value.document).getAncestors(n);t&&t.forEach(function(n){var o=n.key,i=e.value.document.getNode(o);i&&normalizeNode(e,i,a)})},exports.default=Changes},{}],187:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,_text=require("../models/text"),_text2=_interopRequireDefault(_text);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var CORE_SCHEMA_RULES=[{validateNode:function(e){if("document"==e.kind){var n=e.nodes.filter(function(e){return"block"!=e.kind});if(n.size)return function(e){n.forEach(function(n){e.removeNodeByKey(n.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.kind){var n=e.nodes.first();if(n){var i="block"==n.kind?["block"]:["inline","text"],t=e.nodes.filter(function(e){return!i.includes(e.kind)});if(t.size)return function(e){t.forEach(function(n){e.removeNodeByKey(n.key,{normalize:!1})})}}}}},{validateNode:function(e){if("inline"==e.kind){var n=e.nodes.filter(function(e){return"inline"!=e.kind&&"text"!=e.kind});if(n.size)return function(e){n.forEach(function(n){e.removeNodeByKey(n.key,{normalize:!1})})}}}},{validateNode:function(e){if(!("block"!=e.kind&&"inline"!=e.kind||e.nodes.size>0))return function(n){var i=_text2.default.create();n.insertNodeByKey(e.key,0,i,{normalize:!1})}}},{validateNode:function(e){if(e.isVoid&&!("block"!=e.kind&&"inline"!=e.kind||" "==e.text&&1==e.nodes.size))return function(n){var i=_text2.default.create(" "),t=e.nodes.size;n.insertNodeByKey(e.key,t,i,{normalize:!1}),e.nodes.forEach(function(e){n.removeNodeByKey(e.key,{normalize:!1})})}}},{validateNode:function(e){if("block"==e.kind){var n=e.nodes.filter(function(e){return"inline"==e.kind&&""==e.text});if(n.size)return function(i){if(e.nodes.size==n.size){var t=_text2.default.create();i.insertNodeByKey(e.key,1,t,{normalize:!1})}n.forEach(function(e){i.removeNodeByKey(e.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.kind||"inline"==e.kind){var n=e.nodes.reduce(function(n,i,t){if("inline"!==i.kind)return n;var r=t>0?e.nodes.get(t-1):null,o=e.nodes.get(t+1),d=!r,f=!o||"inline"==o.kind;return(f||d)&&(n=n.push({insertAfter:f,insertBefore:d,index:t})),n},new _immutable.List);if(n.size)return function(i){var t=0;n.forEach(function(n){var r=n.index,o=n.insertAfter;n.insertBefore&&(i.insertNodeByKey(e.key,t+r,_text2.default.create(),{normalize:!1}),t++),o&&(i.insertNodeByKey(e.key,t+r+1,_text2.default.create(),{normalize:!1}),t++)})}}}},{validateNode:function(e){if("block"==e.kind||"inline"==e.kind){var n=e.nodes.map(function(n,i){var t=e.nodes.get(i+1);if("text"==n.kind&&t&&"text"==t.kind)return t}).filter(Boolean);if(n.size)return function(e){n.reverse().forEach(function(n){e.mergeNodeByKey(n.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.kind||"inline"==e.kind){var n=e.nodes;if(!(n.size<=1)){var i=n.filter(function(e,i){if("text"==e.kind&&!(e.text.length>0)){var t=i>0?n.get(i-1):null,r=n.get(i+1);if((t||"inline"!=r.kind)&&(r||"inline"!=t.kind)&&(!r||!t||"inline"!=r.kind||"inline"!=t.kind))return!0}});if(i.size)return function(e){i.forEach(function(n){e.removeNodeByKey(n.key,{normalize:!1})})}}}}}];exports.default=CORE_SCHEMA_RULES},{"../models/text":205}],188:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MODEL_TYPES={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",LEAF:"@@__SLATE_LEAF__@@",MARK:"@@__SLATE_MARK__@@",OPERATION:"@@__SLATE_OPERATION__@@",
RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",STACK:"@@__SLATE_STACK__@@",TEXT:"@@__SLATE_TEXT__@@",VALUE:"@@__SLATE_VALUE__@@"};exports.default=MODEL_TYPES},{}],189:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OPERATION_ATTRIBUTES={add_mark:["value","path","offset","length","mark"],insert_node:["value","path","node"],insert_text:["value","path","offset","text","marks"],merge_node:["value","path","position","target"],move_node:["value","path","newPath"],remove_mark:["value","path","offset","length","mark"],remove_node:["value","path","node"],remove_text:["value","path","offset","text","marks"],set_mark:["value","path","offset","length","mark","properties"],set_node:["value","path","node","properties"],set_selection:["value","selection","properties"],set_value:["value","properties"],split_node:["value","path","position","target"]};exports.default=OPERATION_ATTRIBUTES},{}],190:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setKeyGenerator=exports.resetKeyGenerator=exports.Value=exports.Text=exports.Stack=exports.Schema=exports.Range=exports.Operations=exports.Operation=exports.Node=exports.Mark=exports.Leaf=exports.Inline=exports.History=exports.Document=exports.Data=exports.Character=exports.Changes=exports.Block=void 0;var _block=require("./models/block"),_block2=_interopRequireDefault(_block),_changes=require("./changes"),_changes2=_interopRequireDefault(_changes),_character=require("./models/character"),_character2=_interopRequireDefault(_character),_data=require("./models/data"),_data2=_interopRequireDefault(_data),_document=require("./models/document"),_document2=_interopRequireDefault(_document),_history=require("./models/history"),_history2=_interopRequireDefault(_history),_inline=require("./models/inline"),_inline2=_interopRequireDefault(_inline),_leaf=require("./models/leaf"),_leaf2=_interopRequireDefault(_leaf),_mark=require("./models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("./models/node"),_node2=_interopRequireDefault(_node),_operation=require("./models/operation"),_operation2=_interopRequireDefault(_operation),_operations=require("./operations"),_operations2=_interopRequireDefault(_operations),_range=require("./models/range"),_range2=_interopRequireDefault(_range),_schema=require("./models/schema"),_schema2=_interopRequireDefault(_schema),_stack=require("./models/stack"),_stack2=_interopRequireDefault(_stack),_text=require("./models/text"),_text2=_interopRequireDefault(_text),_value=require("./models/value"),_value2=_interopRequireDefault(_value),_generateKey=require("./utils/generate-key");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.Block=_block2.default,exports.Changes=_changes2.default,exports.Character=_character2.default,exports.Data=_data2.default,exports.Document=_document2.default,exports.History=_history2.default,exports.Inline=_inline2.default,exports.Leaf=_leaf2.default,exports.Mark=_mark2.default,exports.Node=_node2.default,exports.Operation=_operation2.default,exports.Operations=_operations2.default,exports.Range=_range2.default,exports.Schema=_schema2.default,exports.Stack=_stack2.default,exports.Text=_text2.default,exports.Value=_value2.default,exports.resetKeyGenerator=_generateKey.resetKeyGenerator,exports.setKeyGenerator=_generateKey.setKeyGenerator,exports.default={Block:_block2.default,Changes:_changes2.default,Character:_character2.default,Data:_data2.default,Document:_document2.default,History:_history2.default,Inline:_inline2.default,Leaf:_leaf2.default,Mark:_mark2.default,Node:_node2.default,Operation:_operation2.default,Operations:_operations2.default,Range:_range2.default,Schema:_schema2.default,Stack:_stack2.default,Text:_text2.default,Value:_value2.default,resetKeyGenerator:_generateKey.resetKeyGenerator,setKeyGenerator:_generateKey.setKeyGenerator}},{"./changes":182,"./models/block":191,"./models/character":193,"./models/data":194,"./models/document":195,"./models/history":196,"./models/inline":197,"./models/leaf":198,"./models/mark":199,"./models/node":200,"./models/operation":201,"./models/range":202,"./models/schema":203,"./models/stack":204,"./models/text":205,"./models/value":206,"./operations":208,"./utils/generate-key":210}],191:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();require("./document");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_node=require("./node"),_node2=_interopRequireDefault(_node),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Block=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={kind:this.kind,type:this.type,isVoid:this.isVoid,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"block"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isBlock(e))return e;var r=e.data,o=void 0===r?{}:r,n=e.isVoid,i=void 0!==n&&n,u=e.key,a=void 0===u?(0,_generateKey2.default)():u,s=e.nodes,l=void 0===s?[]:s,c=e.type;if("string"!=typeof c)throw new Error("`Block.fromJSON` requires a `type` string.");return new t({key:a,type:c,isVoid:!!i,data:new _immutable.Map(o),nodes:new _immutable.List(l.map(_node2.default.fromJSON))})}},{key:"isBlock",value:function(e){return!(!e||!e[_modelTypes2.default.BLOCK])}},{key:"isBlockList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isBlock(e)})}}]),t}();Block.fromJS=Block.fromJSON,Block.prototype[_modelTypes2.default.BLOCK]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Block.prototype[e]=_node2.default.prototype[e])}),exports.default=Block},{"../constants/model-types":188,"../utils/generate-key":210,"./document":195,"./node":200,"is-plain-object":6}],192:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_changes=require("../changes"),_changes2=_interopRequireDefault(_changes),_operation=require("./operation"),_operation2=_interopRequireDefault(_operation),_apply=require("../operations/apply"),_apply2=_interopRequireDefault(_apply);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var debug=(0,_debug2.default)("slate:change"),Change=function(){function e(t){_classCallCheck(this,e);var a=t.value;this.value=a,this.operations=new _immutable.List,this.flags=(0,_pick2.default)(t,["merge","save"])}return _createClass(e,null,[{key:"isChange",value:function(e){return!(!e||!e[_modelTypes2.default.CHANGE])}}]),_createClass(e,[{key:"applyOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.operations,r=this.flags,n=this.value,i=n.history;(0,_isPlainObject2.default)(e)&&(e=_extends({},e,{value:n})),e=_operation2.default.create(e);var u=t=_extends({},r,t),l=u.merge,o=void 0===l?0!=a.size||null:l,s=u.save,p=void 0===s||s,c=u.skip,f=void 0===c?null:c;return debug("apply",{operation:e,save:p,merge:o}),n=(0,_apply2.default)(n,e),i&&p&&(i=i.save(e,{merge:o,skip:f}),n=n.set("history",i)),this.value=n,this.operations=a.push(e),this}},{key:"applyOperations",value:function(e,t){var a=this;return e.forEach(function(e){return a.applyOperation(e,t)}),this}},{key:"call",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return e.apply(void 0,[this].concat(a)),this}},{key:"setOperationFlag",value:function(e,t){return this.flags[e]=t,this}},{key:"unsetOperationFlag",value:function(e){return delete this.flags[e],this}},{key:"kind",get:function(){return"change"}}]),e}();Change.prototype[_modelTypes2.default.CHANGE]=!0,Object.keys(_changes2.default).forEach(function(e){Change.prototype[e]=function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return debug(e,{args:a}),this.call.apply(this,[_changes2.default[e]].concat(a)),this}}),exports.default=Change},{"../changes":182,"../constants/model-types":188,"../operations/apply":207,"./operation":201,debug:1,"is-plain-object":6,"lodash/pick":171}],193:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={marks:new _immutable.Set,text:""},Character=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"toJSON",value:function(){return{kind:this.kind,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJSON()})}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"character"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isCharacter(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Character.create` only accepts objects, strings or characters, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("string"==typeof e&&(e=e.split("")),_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Block.createList` only accepts strings, arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.text,n=e.marks,i=void 0===n?[]:n;if("string"!=typeof r)throw new Error("`Character.fromJSON` requires a block `text` string.");return new t({text:r,marks:new _immutable.Set(i)})}},{key:"isCharacter",value:function(e){return!(!e||!e[_modelTypes2.default.CHARACTER])}},{key:"isCharacterList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isCharacter(e)})}}]),t}();Character.fromJS=Character.fromJSON,Character.prototype[_modelTypes2.default.CHARACTER]=!0,exports.default=Character},{"../constants/model-types":188,"is-plain-object":6}],194:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Data=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_immutable.Map.isMap(t))return t;if((0,_isPlainObject2.default)(t))return e.fromJSON(t);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+t)}},{key:"fromJSON",value:function(e){return new _immutable.Map(e)}}]),e}();Data.fromJS=Data.fromJSON,exports.default=Data},{"is-plain-object":6}],195:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();require("./block"),require("./inline");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={data:new _immutable.Map,key:void 0,nodes:new _immutable.List},Document=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={kind:this.kind,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"document"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDocument(e))return e;if((_immutable.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isDocument(e))return e;var r=e.data,n=void 0===r?{}:r,o=e.key,i=void 0===o?(0,_generateKey2.default)():o,u=e.nodes,a=void 0===u?[]:u;return new t({key:i,data:new _immutable.Map(n),nodes:new _immutable.List(a.map(_node2.default.fromJSON))})}},{key:"isDocument",value:function(e){return!(!e||!e[_modelTypes2.default.DOCUMENT])}}]),t}();Document.fromJS=Document.fromJSON,Document.prototype[_modelTypes2.default.DOCUMENT]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Document.prototype[e]=_node2.default.prototype[e])}),exports.default=Document},{"../constants/model-types":188,"../utils/generate-key":210,"./block":191,"./inline":197,"./node":200,"is-plain-object":6}],196:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=(0,_debug2.default)("slate:history"),DEFAULTS={redos:new _immutable.Stack,undos:new _immutable.Stack},History=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,o=r,n=o.undos,i=o.redos,s=t.merge,u=t.skip,a=n.peek(),l=a&&a.last();if(null==u&&(u=shouldSkip(e,l)),u)return r;if(null==s&&(s=shouldMerge(e,l)),debug("save",{operation:e,merge:s}),s&&a){var c=a.push(e);n=(n=n.pop()).push(c)}else{var f=new _immutable.List([e]);n=n.push(f)}return n.size>100&&(n=n.take(100)),i=i.clear(),r=r.set("undos",n).set("redos",i)}},{key:"toJSON",value:function(){return{kind:this.kind,redos:this.redos.toJSON(),undos:this.undos.toJSON()}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"history"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isHistory(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`History.create` only accepts objects or histories, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.redos,o=void 0===r?[]:r,n=e.undos,i=void 0===n?[]:n;return new t({redos:new _immutable.Stack(o),undos:new _immutable.Stack(i)})}},{key:"isHistory",value:function(e){return!(!e||!e[_modelTypes2.default.HISTORY])}}]),t}();function shouldMerge(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type||"insert_text"==e.type&&"insert_text"==t.type&&e.offset==t.offset+t.text.length&&(0,_isEqual2.default)(e.path,t.path)||"remove_text"==e.type&&"remove_text"==t.type&&e.offset+e.text.length==t.offset&&(0,_isEqual2.default)(e.path,t.path))}function shouldSkip(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type)}History.fromJS=History.fromJSON,History.prototype[_modelTypes2.default.HISTORY]=!0,exports.default=History},{"../constants/model-types":188,debug:1,"is-plain-object":6,"lodash/isEqual":157}],197:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();require("./document");var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Inline=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={kind:this.kind,type:this.type,isVoid:this.isVoid,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"inline"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isInline(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isInline(e))return e;var n=e.data,r=void 0===n?{}:n,i=e.isVoid,o=void 0!==i&&i,u=e.key,a=void 0===u?(0,_generateKey2.default)():u,s=e.nodes,l=void 0===s?[]:s,c=e.type;if("string"!=typeof c)throw new Error("`Inline.fromJS` requires a `type` string.");return new t({key:a,type:c,isVoid:!!o,data:new _immutable.Map(r),nodes:new _immutable.List(l.map(_node2.default.fromJSON))})}},{key:"isInline",value:function(e){return!(!e||!e[_modelTypes2.default.INLINE])}},{key:"isInlineList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isInline(e)})}}]),t}();Inline.fromJS=Inline.fromJSON,Inline.prototype[_modelTypes2.default.INLINE]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Inline.prototype[e]=_node2.default.prototype[e])}),exports.default=Inline},{"../constants/model-types":188,"../utils/generate-key":210,"./document":195,"./node":200,"is-plain-object":6}],198:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={marks:new _immutable.Set,text:""},Leaf=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"getCharacters",value:function(){var e=this.marks;return _character2.default.createList(this.text.split("").map(function(t){return _character2.default.create({text:t,marks:e})}))}},{key:"toJSON",value:function(){return{kind:this.kind,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJSON()})}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"leaf"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isLeaf(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.text,a=void 0===r?"":r,n=e.marks,i=void 0===n?[]:n;return new t({text:a,marks:new _immutable.Set(i.map(_mark2.default.fromJSON))})}},{key:"isLeaf",value:function(e){return!(!e||!e[_modelTypes2.default.LEAF])}},{key:"isLeafList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isLeaf(e)})}}]),t}();Leaf.fromJS=Leaf.fromJSON,Leaf.prototype[_modelTypes2.default.LEAF]=!0,exports.default=Leaf},{"../constants/model-types":188,"./character":193,"./mark":199,"is-plain-object":6}],199:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_data=require("./data"),_data2=_interopRequireDefault(_data),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={data:new _immutable.Map,type:void 0},Mark=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"toJSON",value:function(){return{kind:this.kind,type:this.type,data:this.data.toJSON()}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"mark"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(_immutable.Set.isSet(e)||Array.isArray(e))return new _immutable.Set(e.map(t.create));if(null==e)return new _immutable.Set
;throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var r={};return"type"in e&&(r.type=e.type),"data"in e&&(r.data=_data2.default.create(e.data)),r}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var r=e.data,a=void 0===r?{}:r,n=e.type;if("string"!=typeof n)throw new Error("`Mark.fromJS` requires a `type` string.");return new t({type:n,data:new _immutable.Map(a)})}},{key:"isMark",value:function(e){return!(!e||!e[_modelTypes2.default.MARK])}},{key:"isMarkSet",value:function(e){return _immutable.Set.isSet(e)&&e.every(function(e){return t.isMark(e)})}}]),t}();Mark.fromJS=Mark.fromJSON,Mark.prototype[_modelTypes2.default.MARK]=!0,(0,_memoize2.default)(Mark.prototype,["getComponent"],{takesArguments:!0}),exports.default=Mark},{"../constants/model-types":188,"../utils/memoize":212,"./data":194,"is-plain-object":6}],200:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_direction=require("direction"),_direction2=_interopRequireDefault(_direction),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_block=require("./block"),_block2=_interopRequireDefault(_block),_data=require("./data"),_data2=_interopRequireDefault(_data),_document=require("./document"),_document2=_interopRequireDefault(_document),_inline=require("./inline"),_inline2=_interopRequireDefault(_inline),_range8=require("./range"),_range9=_interopRequireDefault(_range8),_text=require("./text"),_text2=_interopRequireDefault(_text),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isIndexInRange=require("../utils/is-index-in-range"),_isIndexInRange2=_interopRequireDefault(_isIndexInRange),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Node=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"areDescendantsSorted",value:function(e,t){e=assertKey(e),t=assertKey(t);var n=this.getKeysAsArray(),r=n.indexOf(e),s=n.indexOf(t);return-1==r||-1==s?null:r<s}},{key:"assertChild",value:function(e){var t=this.getChild(e);if(!t)throw e=assertKey(e),new Error('Could not find a child node with key "'+e+'".');return t}},{key:"assertDescendant",value:function(e){var t=this.getDescendant(e);if(!t)throw e=assertKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t}},{key:"assertNode",value:function(e){var t=this.getNode(e);if(!t)throw e=assertKey(e),new Error('Could not find a node with key "'+e+'".');return t}},{key:"assertPath",value:function(e){var t=this.getDescendantAtPath(e);if(!t)throw new Error('Could not find a descendant at path "'+e+'".');return t}},{key:"filterDescendants",value:function(e){var t=[];return this.forEachDescendant(function(n,r,s){e(n,r,s)&&t.push(n)}),(0,_immutable.List)(t)}},{key:"findDescendant",value:function(e){var t=null;return this.forEachDescendant(function(n,r,s){if(e(n,r,s))return t=n,!1}),t}},{key:"forEachDescendant",value:function(e){var t=void 0;return this.nodes.forEach(function(n,r,s){return!1===e(n,r,s)?(t=!1,!1):"text"!=n.kind?t=n.forEachDescendant(e):void 0}),t}},{key:"getAncestors",value:function(e){if((e=assertKey(e))==this.key)return(0,_immutable.List)();if(this.hasChild(e))return(0,_immutable.List)([this]);var t=void 0;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getAncestors(e))}),t?t.unshift(this):null}},{key:"getBlocks",value:function(){var e=this.getBlocksAsArray();return new _immutable.List(e)}},{key:"getBlocksAsArray",value:function(){return this.nodes.reduce(function(e,t){return"block"!=t.kind?e:t.isLeafBlock()?(e.push(t),e):e.concat(t.getBlocksAsArray())},[])}},{key:"getBlocksAtRange",value:function(e){var t=this.getBlocksAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getBlocksAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getClosestBlock(n);if(n==r)return[s];var i=this.getClosestBlock(r),a=this.getBlocksAsArray(),u=a.indexOf(s),o=a.indexOf(i);return a.slice(u,o+1)}},{key:"getBlocksByType",value:function(e){var t=this.getBlocksByTypeAsArray(e);return new _immutable.List(t)}},{key:"getBlocksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"block"!=n.kind?t:n.isLeafBlock()&&n.type==e?(t.push(n),t):t.concat(n.getBlocksByTypeAsArray(e))},[])}},{key:"getCharacters",value:function(){var e=this.getCharactersAsArray();return new _immutable.List(e)}},{key:"getCharactersAsArray",value:function(){return this.nodes.reduce(function(e,t){return"text"==t.kind?e.concat(t.characters.toArray()):e.concat(t.getCharactersAsArray())},[])}},{key:"getCharactersAtRange",value:function(e){var t=this.getCharactersAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getCharactersAtRangeAsArray",value:function(e){return(e=e.normalize(this)).isUnset?[]:this.getTextsAtRange(e).reduce(function(t,n){var r=n.characters.filter(function(t,r){return(0,_isIndexInRange2.default)(r,n,e)}).toArray();return t.concat(r)},[])}},{key:"getChild",value:function(e){return e=assertKey(e),this.nodes.find(function(t){return t.key==e})}},{key:"getClosest",value:function(e,t){e=assertKey(e);var n=this.getAncestors(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');return n.rest().findLast(t)}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,function(e){return"block"==e.kind})}},{key:"getClosestInline",value:function(e){return this.getClosest(e,function(e){return"inline"==e.kind})}},{key:"getClosestVoid",value:function(e){return this.getClosest(e,function(e){return e.isVoid})}},{key:"getCommonAncestor",value:function(e,t){if(e=assertKey(e),t=assertKey(t),e==this.key)return this;if(t==this.key)return this;this.assertDescendant(e),this.assertDescendant(t);for(var n=new _immutable.List,r=this.getParent(e),s=this.getParent(t);r;)n=n.push(r),r=this.getParent(r.key);for(;s;){if(n.includes(s))return s;s=this.getParent(s.key)}}},{key:"getDecorations",value:function(e){var t=e.find("decorateNode",this);return _range9.default.createList(t||[])}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.assertDescendant(e),this.hasChild(e)?t:this.getFurthestAncestor(e).getDepth(e,t+1)}},{key:"getDescendant",value:function(e){e=assertKey(e);var t=null,n=this.nodes.find(function(n){return n.key===e?n:"text"!==n.kind&&(t=n.getDescendant(e))});return t||n}},{key:"getDescendantAtPath",value:function(e){var t=this,n=!0,r=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!t)return;if(!t.nodes)return;t=t.nodes.get(u)}}catch(e){r=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return t}},{key:"getFirstText",value:function(){var e=null,t=this.nodes.find(function(t){return"text"==t.kind||(e=t.getFirstText())});return e||t}},{key:"getFragmentAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return _document2.default.create();for(var t=this,n=e,r=n.startKey,s=n.startOffset,i=n.endKey,a=n.endOffset,u=t.assertDescendant(r),o=t.assertDescendant(i),l=u,c=void 0,d=void 0;d=t.getParent(l.key);){var f=d.nodes.indexOf(l),g="text"==l.kind?s:l.nodes.indexOf(c);d=d.splitNode(f,g),t=t.updateNode(d),c=d.nodes.get(f+1),l=d}for(l=r==i?t.getNextText(r):o;d=t.getParent(l.key);){var y=d.nodes.indexOf(l),h="text"==l.kind?r==i?a-s:a:l.nodes.indexOf(c);d=d.splitNode(y,h),t=t.updateNode(d),c=d.nodes.get(y+1),l=d}var k=t.getNextSibling(t.getFurthestAncestor(r).key),v=r==i?t.getNextSibling(t.getNextSibling(t.getFurthestAncestor(i).key).key):t.getNextSibling(t.getFurthestAncestor(i).key),A=t.nodes.indexOf(k),m=t.nodes.indexOf(v),x=t.nodes.slice(A,m);return _document2.default.create({nodes:x})}},{key:"getFurthest",value:function(e,t){var n=this.getAncestors(e);if(!n)throw e=assertKey(e),new Error('Could not find a descendant node with key "'+e+'".');return n.rest().find(t)}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,function(e){return"block"==e.kind})}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,function(e){return"inline"==e.kind})}},{key:"getFurthestAncestor",value:function(e){return e=assertKey(e),this.nodes.find(function(t){return t.key==e||"text"!=t.kind&&t.hasDescendant(e)})}},{key:"getFurthestOnlyChildAncestor",value:function(e){var t=this.getAncestors(e);if(!t)throw e=assertKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t.skipLast().reverse().takeUntil(function(e){return e.nodes.size>1}).last()}},{key:"getInlines",value:function(){var e=this.getInlinesAsArray();return new _immutable.List(e)}},{key:"getInlinesAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"!=t.kind&&(t.isLeafInline()?e.push(t):e=e.concat(t.getInlinesAsArray()))}),e}},{key:"getInlinesAtRange",value:function(e){var t=this.getInlinesAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getInlinesAtRangeAsArray",value:function(e){var t=this;return(e=e.normalize(this)).isUnset?[]:this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})}},{key:"getInlinesByType",value:function(e){var t=this.getInlinesByTypeAsArray(e);return new _immutable.List(t)}},{key:"getInlinesByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t:n.isLeafInline()&&n.type==e?(t.push(n),t):t.concat(n.getInlinesByTypeAsArray(e))},[])}},{key:"getKeysAsArray",value:function(){var e=[];return this.forEachDescendant(function(t){e.push(t.key)}),e}},{key:"getKeys",value:function(){var e=this.getKeysAsArray();return new _immutable.Set(e)}},{key:"getLastText",value:function(){var e=null,t=this.nodes.findLast(function(t){return"text"==t.kind||(e=t.getLastText())});return e||t}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.Set(e)}},{key:"getOrderedMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.nodes.reduce(function(e,t){return e.concat(t.getMarksAsArray())},[])}},{key:"getMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getActiveMarksAtRange",value:function(e){var t=this.getActiveMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getMarksAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);return s&&0!=s.text.length?s.characters.get(s.text.length-1).marks.toArray():[]}return e.isCollapsed?this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray():this.getCharactersAtRange(e).reduce(function(e,t){return t.marks.toArray().forEach(function(t){return e.push(t)}),e},[])}},{key:"getActiveMarksAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);return s&&0!=s.text.length?s.characters.get(s.text.length-1).marks.toArray():[]}if(e.isCollapsed)return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray();var i=this.getCharactersAtRange(e),a=i.first();if(!a)return[];var u=a.marks;return i.slice(1).forEach(function(e){return 0!=(u=u.intersect(e.marks)).size}),u.toArray()}},{key:"getMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getMarksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t.concat(n.getMarksAsArray().filter(function(t){return t.type==e})):t.concat(n.getMarksByTypeAsArray(e))},[])}},{key:"getNextBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;"block"==t.kind?n=t.getLastText():n=this.getClosestBlock(e).getLastText();var r=this.getNextText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getNextSibling",value:function(e){e=assertKey(e);var t=this.getParent(e).nodes.skipUntil(function(t){return t.key==e});if(0==t.size)throw new Error('Could not find a child node with key "'+e+'".');return t.get(1)}},{key:"getNextText",value:function(e){return e=assertKey(e),this.getTexts().skipUntil(function(t){return t.key==e}).get(1)}},{key:"getNode",value:function(e){return e=assertKey(e),this.key==e?this:this.getDescendant(e)}},{key:"getNodeAtPath",value:function(e){return e.length?this.getDescendantAtPath(e):this}},{key:"getOffset",value:function(e){this.assertDescendant(e);var t=this.getFurthestAncestor(e),n=this.nodes.takeUntil(function(e){return e==t}).reduce(function(e,t){return e+t.text.length},0);return this.hasChild(e)?n:n+t.getOffset(e)}},{key:"getOffsetAtRange",value:function(e){if((e=e.normalize(this)).isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e,n=t.startKey,r=t.startOffset;return this.getOffset(n)+r}},{key:"getParent",value:function(e){if(this.hasChild(e))return this;var t=null;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getParent(e))}),t}},{key:"getPath",value:function(e){var t=this.assertNode(e),n=[];return this.getAncestors(e).reverse().forEach(function(e){var r=e.nodes.indexOf(t);n.unshift(r),t=e}),n}},{key:"getPlaceholder",value:function(e){return e.__getPlaceholder(this)}},{key:"getPreviousBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;"block"==t.kind?n=t.getFirstText():n=this.getClosestBlock(e).getFirstText();var r=this.getPreviousText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getPreviousSibling",value:function(e){e=assertKey(e);var t=this.getParent(e),n=t.nodes.takeUntil(function(t){return t.key==e});if(n.size==t.nodes.size)throw new Error('Could not find a child node with key "'+e+'".');return n.last()}},{key:"getPreviousText",value:function(e){return e=assertKey(e),this.getTexts().takeUntil(function(t){return t.key==e}).last()}},{key:"getSelectionIndexes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.startKey,r=e.endKey;if(!t||e.isBlurred)return null;if(e.isUnset)return null;if(n==r){var s=this.getFurthestAncestor(n),i=s?this.nodes.indexOf(s):null;return{start:i,end:i+1}}var a=null,u=null;return this.nodes.forEach(function(e,t){return"text"==e.kind?(null==a&&e.key==n&&(a=t),null==u&&e.key==r&&(u=t+1)):(null==a&&e.hasDescendant(n)&&(a=t),null==u&&e.hasDescendant(r)&&(u=t+1)),null==a||null==u}),t&&null==a&&(a=0),t&&null==u&&(u=this.nodes.size),null==a?null:{start:a,end:u}}},{key:"getText",value:function(){return this.nodes.reduce(function(e,t){return e+t.text},"")}},{key:"getTextAtOffset",value:function(e){if(0==e)return this.getFirstText();if(e==this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0;return this.getTexts().find(function(n,r,s){return(t+=n.text.length)>e})}},{key:"getTextDirection",value:function(){var e=(0,_direction2.default)(this.text);return"neutral"==e?void 0:e}},{key:"getTexts",value:function(){var e=this.getTextsAsArray();return new _immutable.List(e)}},{key:"getTextsAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"==t.kind?e.push(t):e=e.concat(t.getTextsAsArray())}),e}},{key:"getTextsAtRange",value:function(e){var t=this.getTextsAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getTextsAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getDescendant(n);if(n==r)return[s];var i=this.getDescendant(r),a=this.getTextsAsArray(),u=a.indexOf(s),o=a.indexOf(i);return a.slice(u,o+1)}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"hasVoidParent",value:function(e){return!!this.getClosest(e,function(e){return e.isVoid})}},{key:"insertNode",value:function(e,t){var n=this.getKeys();n.contains(t.key)&&(t=t.regenerateKey()),"text"!=t.kind&&(t=t.mapDescendants(function(e){return n.contains(e.key)?e.regenerateKey():e}));var r=this.nodes.insert(e,t);return this.set("nodes",r)}},{key:"isInRange",value:function(e){var t=this,n=e=e.normalize(this),r=n.startKey,s=n.endKey,i=n.isCollapsed;if(t.key==r||t.key==s||t.hasDescendant(r)||t.hasDescendant(s))return!0;if(i)return!1;var a=!1;return t.getTextsAtRange(e).forEach(function(e){return t.hasDescendant(e.key)&&(a=!0),a}),a}},{key:"isLeafBlock",value:function(){return"block"==this.kind&&this.nodes.every(function(e){return"block"!=e.kind})}},{key:"isLeafInline",value:function(){return"inline"==this.kind&&this.nodes.every(function(e){return"inline"!=e.kind})}},{key:"mergeNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=n.nodes.get(t);if(r.kind!=s.kind)throw new Error('Tried to merge two nodes of different kinds: "'+r.kind+'" and "'+s.kind+'".');if("text"==r.kind){var i=r.characters.concat(s.characters);r=r.set("characters",i)}else{var a=r.nodes.concat(s.nodes);r=r.set("nodes",a)}return n=(n=(n=n.removeNode(t)).removeNode(e)).insertNode(e,r)}},{key:"mapChildren",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=e(r,s,t.nodes);i!=r&&(n=n.set(i.key,i))}),this.set("nodes",n)}},{key:"mapDescendants",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=r;if("text"!=i.kind&&(i=i.mapDescendants(e)),(i=e(i,s,t.nodes))!=r){var a=n.indexOf(r);n=n.set(a,i)}}),this.set("nodes",n)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeDescendant",value:function(e){e=assertKey(e);var t=this,n=t.getParent(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');var r=n.nodes.findIndex(function(t){return t.key===e}),s=n.nodes.splice(r,1);return n=n.set("nodes",s),t=t.updateNode(n)}},{key:"removeNode",value:function(e){var t=this.nodes.splice(e,1);return this.set("nodes",t)}},{key:"splitNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=void 0,i=void 0;if("text"==r.kind){var a=r.characters.take(t),u=r.characters.skip(t);s=r.set("characters",a),i=r.set("characters",u).regenerateKey()}else{var o=r.nodes.take(t),l=r.nodes.skip(t);s=r.set("nodes",o),i=r.set("nodes",l).regenerateKey()}return n=(n=(n=n.removeNode(e)).insertNode(e,i)).insertNode(e,s)}},{key:"updateNode",value:function(e){if(e.key==this.key)return e;var t=this.assertDescendant(e.key);return this.getAncestors(e.key).reverse().forEach(function(n){var r=n.nodes,s=r.indexOf(t);t=n,r=r.set(s,e),n=n.set("nodes",r),e=n}),e}},{key:"validate",value:function(e){return e.validateNode(this)}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if((0,_isPlainObject2.default)(t))switch(t.kind){case"block":return _block2.default.create(t);case"document":return _document2.default.create(t);case"inline":return _inline2.default.create(t);case"text":return _text2.default.create(t);default:throw new Error("`Node.create` requires a `kind` string.")}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(t)||Array.isArray(t))return new _immutable.List(t.map(e.create));throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_block2.default.isBlock(e)||_inline2.default.isInline(e))return{data:e.data,isVoid:e.isVoid,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=_data2.default.create(e.data)),"isVoid"in e&&(t.isVoid=e.isVoid),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var t=e.kind;switch(t){case"block":return _block2.default.fromJSON(e);case"document":return _document2.default.fromJSON(e);case"inline":return _inline2.default.fromJSON(e);case"text":return _text2.default.fromJSON(e);default:throw new Error("`Node.fromJSON` requires a `kind` of either 'block', 'document', 'inline' or 'text', but you passed: "+t)}}},{key:"isNode",value:function(e){return _block2.default.isBlock(e)||_document2.default.isDocument(e)||_inline2.default.isInline(e)||_text2.default.isText(e)}},{key:"isNodeList",value:function(t){return _immutable.List.isList(t)&&t.every(function(t){return e.isNode(t)})}}]),e}();function assertKey(e){if("string"==typeof e)return e;throw new Error("Invalid `key` argument! It must be a key string, but you passed: "+e)}Node.fromJS=Node.fromJSON,(0,_memoize2.default)(Node.prototype,["getBlocks","getBlocksAsArray","getCharacters","getCharactersAsArray","getFirstText","getInlines","getInlinesAsArray","getKeys","getKeysAsArray","getLastText","getMarks","getOrderedMarks","getMarksAsArray","getText","getTextDirection","getTexts","getTextsAsArray","isLeafBlock","isLeafInline"],{takesArguments:!1}),(0,_memoize2.default)(Node.prototype,["areDescendantsSorted","getActiveMarksAtRange","getActiveMarksAtRangeAsArray","getAncestors","getBlocksAtRange","getBlocksAtRangeAsArray","getBlocksByType","getBlocksByTypeAsArray","getCharactersAtRange","getCharactersAtRangeAsArray","getChild","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getDecorations","getDepth","getDescendant","getDescendantAtPath","getFragmentAtRange","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRange","getInlinesAtRangeAsArray","getInlinesByType","getInlinesByTypeAsArray","getMarksAtRange","getOrderedMarksAtRange","getMarksAtRangeAsArray","getMarksByType","getOrderedMarksByType","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPlaceholder","getPreviousBlock","getPreviousSibling","getPreviousText","getTextAtOffset","getTextsAtRange","getTextsAtRangeAsArray","hasChild","hasDescendant","hasNode","hasVoidParent","validate"],{takesArguments:!0}),exports.default=Node},{"../utils/generate-key":210,"../utils/is-index-in-range":211,"../utils/memoize":212,"./block":191,"./data":194,"./document":195,"./inline":197,"./range":202,"./text":205,direction:3,"is-plain-object":6}],201:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_operationAttributes=require("../constants/operation-attributes"),_operationAttributes2=_interopRequireDefault(_operationAttributes),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_node=require("./node"),_node2=_interopRequireDefault(_node),_range=require("./range"),_range2=_interopRequireDefault(_range),_value=require("./value"),_value2=_interopRequireDefault(_value);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={length:void 0,mark:void 0,marks:void 0,newPath:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,selection:void 0,target:void 0,text:void 0,type:void 0,value:void 0},Operation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"toJSON",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.kind,t=this.type,r={kind:e,type:t},o=_operationAttributes2.default[t],i=!0,a=!1,n=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,c=this[l];if("document"!=l&&("selection"!=l&&"value"!=l&&("node"!=l||"insert_node"==t))){if("mark"!=l&&"marks"!=l&&"node"!=l||(c=c.toJSON()),"properties"==l&&"set_mark"==t){var f={};"data"in c&&(f.data=c.data.toJS()),"type"in c&&(f.type=c.type),c=f}if("properties"==l&&"set_node"==t){var p={};"data"in c&&(p.data=c.data.toJS()),"isVoid"in c&&(p.isVoid=c.isVoid),"type"in c&&(p.type=c.type),c=p}if("properties"==l&&"set_selection"==t){var d={};"anchorOffset"in c&&(d.anchorOffset=c.anchorOffset),"anchorPath"in c&&(d.anchorPath=c.anchorPath),"focusOffset"in c&&(d.focusOffset=c.focusOffset),"focusPath"in c&&(d.focusPath=c.focusPath),"isBackward"in c&&(d.isBackward=c.isBackward),"isFocused"in c&&(d.isFocused=c.isFocused),"marks"in c&&(d.marks=null==c.marks?null:c.marks.toJSON()),c=d}if("properties"==l&&"set_value"==t){var _={};"data"in c&&(_.data=c.data.toJS()),"decorations"in c&&(_.decorations=c.decorations.toJS()),"schema"in c&&(_.schema=c.schema.toJS()),c=_}r[l]=c}}}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return r}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"operation"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isOperation(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isOperation(e))return e;var r=e.type,o=e.value,i=_operationAttributes2.default[r],a={type:r};if(!i)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+r+'"');var n=!0,u=!1,s=void 0;try{for(var l,c=i[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var f=l.value,p=e[f];if(void 0===p){if("document"==f)continue;if("selection"==f)continue;if("value"==f)continue;if("node"==f&&"insert_node"!=r)continue;throw new Error('`Operation.fromJSON` was passed a "'+r+'" operation without the required "'+f+'" attribute.')}if("mark"==f&&(p=_mark2.default.create(p)),"marks"==f&&null!=p&&(p=_mark2.default.createSet(p)),"node"==f&&(p=_node2.default.create(p)),"selection"==f&&(p=_range2.default.create(p)),"value"==f&&(p=_value2.default.create(p)),"properties"==f&&"set_mark"==r&&(p=_mark2.default.createProperties(p)),"properties"==f&&"set_node"==r&&(p=_node2.default.createProperties(p)),"properties"==f&&"set_selection"==r){var d=p,_=d.anchorKey,v=d.focusKey,y=_objectWithoutProperties(d,["anchorKey","focusKey"]);p=_range2.default.createProperties(y),void 0!==_&&(p.anchorPath=null===_?null:o.document.getPath(_)),void 0!==v&&(p.focusPath=null===v?null:o.document.getPath(v))}"properties"==f&&"set_value"==r&&(p=_value2.default.createProperties(p)),a[f]=p}}catch(e){u=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(u)throw s}}return new t(a)}},{key:"isOperation",value:function(e){return!(!e||!e[_modelTypes2.default.OPERATION])}},{key:"isOperationList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isOperation(e)})}}]),t}();Operation.fromJS=Operation.fromJSON,Operation.prototype[_modelTypes2.default.OPERATION]=!0,exports.default=Operation},{"../constants/model-types":188,"../constants/operation-attributes":189,"./mark":199,"./node":200,"./range":202,"./value":206,"is-plain-object":6}],202:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],r=!0,o=!1,n=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(s.push(a.value),!t||s.length!==t);r=!0);}catch(e){o=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw n}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null},Range=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{
key:"hasAnchorAtStartOf",value:function(e){if(0!=this.anchorOffset)return!1;var t=getFirst(e);return this.anchorKey==t.key}},{key:"hasAnchorAtEndOf",value:function(e){var t=getLast(e);return this.anchorKey==t.key&&this.anchorOffset==t.text.length}},{key:"hasAnchorBetween",value:function(e,t,s){return this.anchorOffset<=s&&t<=this.anchorOffset&&this.hasAnchorIn(e)}},{key:"hasAnchorIn",value:function(e){return"text"==e.kind?e.key==this.anchorKey:null!=this.anchorKey&&e.hasDescendant(this.anchorKey)}},{key:"hasFocusAtEndOf",value:function(e){var t=getLast(e);return this.focusKey==t.key&&this.focusOffset==t.text.length}},{key:"hasFocusAtStartOf",value:function(e){if(0!=this.focusOffset)return!1;var t=getFirst(e);return this.focusKey==t.key}},{key:"hasFocusBetween",value:function(e,t,s){return t<=this.focusOffset&&this.focusOffset<=s&&this.hasFocusIn(e)}},{key:"hasFocusIn",value:function(e){return"text"==e.kind?e.key==this.focusKey:null!=this.focusKey&&e.hasDescendant(this.focusKey)}},{key:"isAtStartOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}},{key:"isAtEndOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}},{key:"focus",value:function(){return this.merge({isFocused:!0})}},{key:"blur",value:function(){return this.merge({isFocused:!1})}},{key:"deselect",value:function(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})}},{key:"flip",value:function(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:null==this.isBackward?null:!this.isBackward})}},{key:"moveAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,s=this.focusKey,r=this.focusOffset,o=this.isBackward,n=this.anchorOffset+e;return this.merge({anchorOffset:n,isBackward:t==s?n>r:o})}},{key:"moveFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,s=this.anchorOffset,r=this.focusKey,o=this.isBackward,n=this.focusOffset+e;return this.merge({focusOffset:n,isBackward:r==t?s>n:o})}},{key:"moveAnchorTo",value:function(e,t){var s=this.anchorKey,r=this.focusKey,o=this.focusOffset,n=this.isBackward;return this.merge({anchorKey:e,anchorOffset:t,isBackward:e==r?t>o:e==s?n:null})}},{key:"moveFocusTo",value:function(e,t){var s=this.focusKey,r=this.anchorKey,o=this.anchorOffset,n=this.isBackward;return this.merge({focusKey:e,focusOffset:t,isBackward:e==r?o>t:e==s?n:null})}},{key:"moveAnchorOffsetTo",value:function(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey==this.focusKey?e>this.focusOffset:this.isBackward})}},{key:"moveFocusOffsetTo",value:function(e){return this.merge({focusOffset:e,isBackward:this.anchorKey==this.focusKey?this.anchorOffset>e:this.isBackward})}},{key:"moveOffsetsTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(t)}},{key:"moveToAnchor",value:function(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}},{key:"moveToFocus",value:function(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}},{key:"moveAnchorToStartOf",value:function(e){return e=getFirst(e),this.moveAnchorTo(e.key,0)}},{key:"moveAnchorToEndOf",value:function(e){return e=getLast(e),this.moveAnchorTo(e.key,e.text.length)}},{key:"moveFocusToStartOf",value:function(e){return e=getFirst(e),this.moveFocusTo(e.key,0)}},{key:"moveFocusToEndOf",value:function(e){return e=getLast(e),this.moveFocusTo(e.key,e.text.length)}},{key:"moveToRangeOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorToStartOf(e).moveFocusToEndOf(t)}},{key:"normalize",value:function(e){var t=this.anchorKey,s=this.anchorOffset,r=this.focusKey,o=this.focusOffset,n=this.isBackward;if(null==t||null==r)return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});var a=e.getDescendant(t),i=e.getDescendant(r);if(!a||!i){_slateDevLogger2.default.warn("The range was invalid and was reset. The range in question was:",this);var u=e.getFirstText();return this.merge({anchorKey:u?u.key:null,anchorOffset:0,focusKey:u?u.key:null,focusOffset:0,isBackward:!1})}if("text"!=a.kind){_slateDevLogger2.default.warn("The range anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",a);var c=a.getTextAtOffset(s);s-=a.getOffset(c.key),a=c}if("text"!=i.kind){_slateDevLogger2.default.warn("The range focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",i);var f=i.getTextAtOffset(o);o-=i.getOffset(f.key),i=f}return null==n&&(n=a.key===i.key?s>o:!e.areDescendantsSorted(a.key,i.key)),this.merge({anchorKey:a.key,anchorOffset:s,focusKey:i.key,focusOffset:o,isBackward:n})}},{key:"toJSON",value:function(){return{kind:this.kind,anchorKey:this.anchorKey,anchorOffset:this.anchorOffset,focusKey:this.focusKey,focusOffset:this.focusOffset,isBackward:this.isBackward,isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map(function(e){return e.toJSON()})}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"range"}},{key:"isBlurred",get:function(){return!this.isFocused}},{key:"isCollapsed",get:function(){return this.anchorKey==this.focusKey&&this.anchorOffset==this.focusOffset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isForward",get:function(){return null==this.isBackward?null:!this.isBackward}},{key:"isSet",get:function(){return null!=this.anchorKey&&null!=this.focusKey}},{key:"isUnset",get:function(){return!this.isSet}},{key:"startKey",get:function(){return this.isBackward?this.focusKey:this.anchorKey}},{key:"startOffset",get:function(){return this.isBackward?this.focusOffset:this.anchorOffset}},{key:"endKey",get:function(){return this.isBackward?this.anchorKey:this.focusKey}},{key:"endOffset",get:function(){return this.isBackward?this.anchorOffset:this.focusOffset}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks};if((0,_isPlainObject2.default)(e)){var s={};return"anchorKey"in e&&(s.anchorKey=e.anchorKey),"anchorOffset"in e&&(s.anchorOffset=e.anchorOffset),"anchorPath"in e&&(s.anchorPath=e.anchorPath),"focusKey"in e&&(s.focusKey=e.focusKey),"focusOffset"in e&&(s.focusOffset=e.focusOffset),"focusPath"in e&&(s.focusPath=e.focusPath),"isBackward"in e&&(s.isBackward=e.isBackward),"isFocused"in e&&(s.isFocused=e.isFocused),"marks"in e&&(s.marks=null==e.marks?null:_mark2.default.createSet(e.marks)),s}throw new Error("`Range.createProperties` only accepts objects or ranges, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var s=e.anchorKey,r=void 0===s?null:s,o=e.anchorOffset,n=void 0===o?0:o,a=e.focusKey,i=void 0===a?null:a,u=e.focusOffset,c=void 0===u?0:u,f=e.isBackward,h=void 0===f?null:f,l=e.isFocused,y=void 0!==l&&l,d=e.marks,v=void 0===d?null:d;return new t({anchorKey:r,anchorOffset:n,focusKey:i,focusOffset:c,isBackward:h,isFocused:y,marks:null==v?null:new _immutable.Set(v.map(_mark2.default.fromJSON))})}},{key:"isRange",value:function(e){return!(!e||!e[_modelTypes2.default.RANGE])}}]),t}();Range.fromJS=Range.fromJSON,Range.prototype[_modelTypes2.default.RANGE]=!0;var MOVE_METHODS=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];MOVE_METHODS.forEach(function(e){var t=_slicedToArray(e,2),s=t[0],r=t[1];Range.prototype[""+s+r]=function(){var e;return(e=this[s+"Anchor"+r].apply(this,arguments))[s+"Focus"+r].apply(e,arguments)}});var EDGE_METHODS=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];EDGE_METHODS.forEach(function(e){var t=_slicedToArray(e,3),s=t[0],r=t[1],o=t[2],n=s+"Anchor"+r,a=s+"Focus"+r;Range.prototype[s+"Start"+r]=function(){return this.isBackward?this[a].apply(this,arguments):this[n].apply(this,arguments)},Range.prototype[s+"End"+r]=function(){return this.isBackward?this[n].apply(this,arguments):this[a].apply(this,arguments)},o&&(Range.prototype[s+"Edge"+r]=function(){return this[n].apply(this,arguments)||this[a].apply(this,arguments)})});var ALIAS_METHODS=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];function getFirst(e){return"text"==e.kind?e:e.getFirstText()}function getLast(e){return"text"==e.kind?e:e.getLastText()}ALIAS_METHODS.forEach(function(e){var t=_slicedToArray(e,2),s=t[0],r=t[1];Range.prototype[s]=function(){return this[r].apply(this,arguments)}}),exports.default=Range},{"../constants/model-types":188,"./mark":199,"is-plain-object":6,"slate-dev-logger":178}],203:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_mergeWith=require("lodash/mergeWith"),_mergeWith2=_interopRequireDefault(_mergeWith),_immutable=window.Immutable,_coreSchemaRules=require("../constants/core-schema-rules"),_coreSchemaRules2=_interopRequireDefault(_coreSchemaRules),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_stack=require("./stack"),_stack2=_interopRequireDefault(_stack),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CHILD_KIND_INVALID="child_kind_invalid",CHILD_REQUIRED="child_required",CHILD_TYPE_INVALID="child_type_invalid",CHILD_UNKNOWN="child_unknown",FIRST_CHILD_KIND_INVALID="first_child_kind_invalid",FIRST_CHILD_TYPE_INVALID="first_child_type_invalid",LAST_CHILD_KIND_INVALID="last_child_kind_invalid",LAST_CHILD_TYPE_INVALID="last_child_type_invalid",NODE_DATA_INVALID="node_data_invalid",NODE_IS_VOID_INVALID="node_is_void_invalid",NODE_MARK_INVALID="node_mark_invalid",NODE_TEXT_INVALID="node_text_invalid",PARENT_KIND_INVALID="parent_kind_invalid",PARENT_TYPE_INVALID="parent_type_invalid",debug=(0,_debug2.default)("slate:schema"),DEFAULTS={stack:_stack2.default.create(),document:{},blocks:{},inlines:{}},Schema=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"getRule",value:function(e){switch(e.kind){case"document":return this.document;case"block":return this.blocks[e.type];case"inline":return this.inlines[e.type]}}},{key:"getParentRules",value:function(){var e=this.blocks,t=this.inlines,n={};for(var r in e){var i=e[r];null!=i.parent&&(n[r]=i)}for(var o in t){var a=t[o];null!=a.parent&&(n[o]=a)}return 0==Object.keys(n).length?null:n}},{key:"fail",value:function(e,t){var n=this;return function(r){debug("normalizing",{reason:e,context:t});var i=t.rule,o=r.operations.size;i.normalize&&i.normalize(r,e,t),r.operations.size>o||n.normalize(r,e,t)}}},{key:"normalize",value:function(e,t,n){switch(t){case CHILD_KIND_INVALID:case CHILD_TYPE_INVALID:case CHILD_UNKNOWN:case FIRST_CHILD_KIND_INVALID:case FIRST_CHILD_TYPE_INVALID:case LAST_CHILD_KIND_INVALID:case LAST_CHILD_TYPE_INVALID:var r=n.child,i=n.node;return"text"==r.kind&&"block"==i.kind&&1==i.nodes.size?e.removeNodeByKey(i.key):e.removeNodeByKey(r.key);case CHILD_REQUIRED:case NODE_TEXT_INVALID:case PARENT_KIND_INVALID:case PARENT_TYPE_INVALID:var o=n.node;return"document"==o.kind?o.nodes.forEach(function(t){return e.removeNodeByKey(t.key)}):e.removeNodeByKey(o.key);case NODE_DATA_INVALID:var a=n.node,l=n.key;return void 0===a.data.get(l)&&"document"!=a.kind?e.removeNodeByKey(a.key):e.setNodeByKey(a.key,{data:a.data.delete(l)});case NODE_IS_VOID_INVALID:var s=n.node;return e.setNodeByKey(s.key,{isVoid:!s.isVoid});case NODE_MARK_INVALID:var u=n.node,c=n.mark;return u.getTexts().forEach(function(t){return e.removeMarkByKey(t.key,0,t.text.length,c)})}}},{key:"validateNode",value:function(e){var t=this,n=this.stack.find("validateNode",e);if(n)return n;if("text"!=e.kind){var r=this.getRule(e)||{},i=this.getParentRules(),o={node:e,rule:r};if(null!=r.isVoid&&e.isVoid!=r.isVoid)return this.fail(NODE_IS_VOID_INVALID,o);if(null!=r.data)for(var a in r.data){var l=r.data[a],s=e.data.get(a);if(!l(s))return this.fail(NODE_DATA_INVALID,_extends({},o,{key:a,value:s}))}if(null!=r.marks){var u=e.getMarks().toArray(),c=!0,d=!1,_=void 0;try{for(var f,h=function(){var e=f.value;if(!r.marks.some(function(t){return t.type===e.type}))return{v:t.fail(NODE_MARK_INVALID,_extends({},o,{mark:e}))}},y=u[Symbol.iterator]();!(c=(f=y.next()).done);c=!0){var I=h();if("object"===(void 0===I?"undefined":_typeof(I)))return I.v}}catch(e){d=!0,_=e}finally{try{!c&&y.return&&y.return()}finally{if(d)throw _}}}if(null!=r.text){var m=e.text;if(!r.text.test(m))return this.fail(NODE_TEXT_INVALID,_extends({},o,{text:m}))}if(null!=r.first){var p=r.first,D=p.kinds,v=p.types,N=e.nodes.first();if(N&&D&&!D.includes(N.kind))return this.fail(FIRST_CHILD_KIND_INVALID,_extends({},o,{child:N}));if(N&&v&&!v.includes(N.type))return this.fail(FIRST_CHILD_TYPE_INVALID,_extends({},o,{child:N}))}if(null!=r.last){var k=r.last,A=k.kinds,L=k.types,b=e.nodes.last();if(b&&A&&!A.includes(b.kind))return this.fail(LAST_CHILD_KIND_INVALID,_extends({},o,{child:b}));if(b&&L&&!L.includes(b.type))return this.fail(LAST_CHILD_TYPE_INVALID,_extends({},o,{child:b}))}if(null!=r.nodes||null!=i){var S=function(){return R=null==R?null:0,C=g.shift(),V=C&&(null==C.min?0:C.min),x=C&&(null==C.max?1/0:C.max),!!C},E=function(){R-=1,O-=1},T=e.nodes.toArray(),g=null!=r.nodes?r.nodes.slice():[],R=void 0,V=void 0,O=void 0,C=void 0,x=void 0,P=void 0;for(null!=r.nodes&&S();O=null==O?0:O+1,R=null==R?0:R+1,P=T[O],null!=x&&R==x&&S(),P;){if(null!=i&&"text"!=P.kind&&P.type in i){var H=i[P.type];if(null!=H.parent.kinds&&!H.parent.kinds.includes(e.kind))return this.fail(PARENT_KIND_INVALID,{node:P,parent:e,rule:H});if(null!=H.parent.types&&!H.parent.types.includes(e.type))return this.fail(PARENT_TYPE_INVALID,{node:P,parent:e,rule:H})}if(null!=r.nodes){if(!C)return this.fail(CHILD_UNKNOWN,_extends({},o,{child:P,index:O}));if(null!=C.kinds&&!C.kinds.includes(P.kind)){if(R>=V&&S()){E();continue}return this.fail(CHILD_KIND_INVALID,_extends({},o,{child:P,index:O}))}if(null!=C.types&&!C.types.includes(P.type)){if(R>=V&&S()){E();continue}return this.fail(CHILD_TYPE_INVALID,_extends({},o,{child:P,index:O}))}}}if(null!=r.nodes)for(;null!=V;){if(R<V)return this.fail(CHILD_REQUIRED,_extends({},o,{index:O}));S()}}}}},{key:"toJSON",value:function(){return{kind:this.kind,document:this.document,blocks:this.blocks,inlines:this.inlines}}},{key:"toJS",value:function(){return this.toJSON()}},{key:"kind",get:function(){return"schema"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSchema(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Schema.create` only accepts objects or schemas, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isSchema(e))return e;var n=e.plugins;if(e.rules)throw new Error("Schemas in Slate have changed! They are no longer accept a `rules` property.");if(e.nodes)throw new Error("Schemas in Slate have changed! They are no longer accept a `nodes` property.");n||(n=[{schema:e}]);var r=resolveSchema(n),i=_stack2.default.create({plugins:[].concat(_toConsumableArray(_coreSchemaRules2.default),_toConsumableArray(n))});return new t(_extends({},r,{stack:i}))}},{key:"isSchema",value:function(e){return!(!e||!e[_modelTypes2.default.SCHEMA])}}]),t}();function resolveSchema(){var e={document:{},blocks:{},inlines:{}};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice().reverse().forEach(function(t){if(t.schema){if(t.schema.rules)throw new Error("Schemas in Slate have changed! They are no longer accept a `rules` property.");if(t.schema.nodes)throw new Error("Schemas in Slate have changed! They are no longer accept a `nodes` property.");var n=t.schema,r=n.document,i=void 0===r?{}:r,o=n.blocks,a=void 0===o?{}:o,l=n.inlines,s=void 0===l?{}:l,u=resolveDocumentRule(i),c={},d={};for(var _ in a)c[_]=resolveNodeRule("block",_,a[_]);for(var f in s)d[f]=resolveNodeRule("inline",f,s[f]);(0,_mergeWith2.default)(e.document,u,customizer),(0,_mergeWith2.default)(e.blocks,c,customizer),(0,_mergeWith2.default)(e.inlines,d,customizer)}}),e}function resolveDocumentRule(e){return _extends({data:{},nodes:null},e)}function resolveNodeRule(e,t,n){return _extends({data:{},isVoid:null,nodes:null,first:null,last:null,parent:null,text:null},n)}function customizer(e,t,n){return"kinds"==n||"types"==n?null==e?t:e.concat(t):null==t?e:t}Schema.fromJS=Schema.fromJSON,Schema.prototype[_modelTypes2.default.SCHEMA]=!0,(0,_memoize2.default)(Schema.prototype,["getParentRules"],{takesArguments:!0}),exports.default=Schema},{"../constants/core-schema-rules":187,"../constants/model-types":188,"../utils/memoize":212,"./stack":204,debug:1,"is-plain-object":6,"lodash/mergeWith":169}],204:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={plugins:[]},Stack=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"getPluginsWith",value:function(e){return this.plugins.filter(function(t){return null!=t[e]})}},{key:"find",value:function(e){for(var t=this.getPluginsWith(e),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=!0,l=!1,u=void 0;try{for(var a,f=t[Symbol.iterator]();!(i=(a=f.next()).done);i=!0){var s=a.value,c=s[e].apply(s,n);if(null!=c)return c}}catch(e){l=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(l)throw u}}}},{key:"map",value:function(e){for(var t=this.getPluginsWith(e),r=[],n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var l=!0,u=!1,a=void 0;try{for(var f,s=t[Symbol.iterator]();!(l=(f=s.next()).done);l=!0){var c=f.value,y=c[e].apply(c,o);null!=y&&r.push(y)}}catch(e){u=!0,a=e}finally{try{!l&&s.return&&s.return()}finally{if(u)throw a}}return r}},{key:"run",value:function(e){for(var t=this.getPluginsWith(e),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=!0,l=!1,u=void 0;try{for(var a,f=t[Symbol.iterator]();!(i=(a=f.next()).done);i=!0){var s=a.value;if(null!=s[e].apply(s,n))return}}catch(e){l=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(l)throw u}}}},{key:"render",value:function(e,t){for(var r=this.getPluginsWith(e).slice().reverse(),n=t.children,o=void 0===n?null:n,i=arguments.length,l=Array(i>2?i-2:0),u=2;u<i;u++)l[u-2]=arguments[u];var a=!0,f=!1,s=void 0;try{for(var c,y=r[Symbol.iterator]();!(a=(c=y.next()).done);a=!0){var p=c.value,v=p[e].apply(p,[t].concat(l));null!=v&&(t.children=o=v)}}catch(e){f=!0,s=e}finally{try{!a&&y.return&&y.return()}finally{if(f)throw s}}return o}},{key:"kind",get:function(){return"stack"}}],[{key:"create",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins;return new t({plugins:void 0===e?[]:e})}},{key:"isStack",value:function(e){return!(!e||!e[_modelTypes2.default.STACK])}}]),t}();Stack.prototype[_modelTypes2.default.STACK]=!0,(0,_memoize2.default)(Stack.prototype,["getPluginsWith"],{takesArguments:!0}),exports.default=Stack},{"../constants/model-types":188,"../utils/memoize":212}],205:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={characters:new _immutable.List,key:void 0},Text=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"addMark",value:function(e,t,r){var a=new _immutable.Set([r]);return this.addMarks(e,t,a)}},{key:"addMarks",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a.marks;return i=i.union(r),a=a.set("marks",i)});return this.set("characters",a)}},{key:"getDecoratedCharacters",value:function(e){var t=this,r=t,a=r.key,n=r.characters;return 0==n.size?n:(e.forEach(function(e){var r=e.startKey,i=e.endKey,u=e.startOffset,s=e.endOffset,o=e.marks,c=r==a?u:0,l=i==a?s-c:n.size;t=t.addMarks(c,l,o)}),t.characters)}},{key:"getDecorations",value:function(e){return e.__getDecorations(this)}},{key:"getLeaves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getDecoratedCharacters(e),r=[],a=void 0,n=void 0;return 0==t.size?r.push({}):t.forEach(function(e,t){var i=e.marks,u=e.text;if(0==t)return a=e,n={text:u,marks:i},void r.push(n);var s=a.marks;if((0,_immutable.is)(i,s))return a=e,void(n.text+=u);a=e,n={text:u,marks:i},r.push(n)},[]),r=new _immutable.List(r.map(function(e){return new _leaf2.default(e)}))}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.characters.reduce(function(e,t){return e.concat(t.marks.toArray())},[])}},{key:"getMarksAtIndex",value:function(e){if(0==e)return _mark2.default.createSet();var t=this.characters.get(e-1);return t?t.marks:_mark2.default.createSet()}},{key:"getNode",value:function(e){return this.key==e?this:null}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"insertText",value:function(e,t,r){var a=this.characters,n=_character2.default.createList(t.split("").map(function(e){return{text:e,marks:r}}));return a=a.slice(0,e).concat(n).concat(a.slice(e)),this.set("characters",a)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a.marks;return i=i.remove(r),a=a.set("marks",i)});return this.set("characters",a)}},{key:"removeText",value:function(e,t){var r=this.characters,a=e,n=e+t;return r=r.filterNot(function(e,t){return a<=t&&t<n}),this.set("characters",r)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={kind:this.kind,leaves:this.getLeaves().toArray().map(function(e){return e.toJSON()})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"updateMark",value:function(e,t,r,a){var n=r.merge(a),i=this.characters.map(function(a,i){if(i<e)return a;if(i>=e+t)return a;var u=a.marks;return u.has(r)?(u=(u=u.remove(r)).add(n),a=a.set("marks",u)):a});return this.set("characters",i)}},{key:"validate",value:function(e){return e.validateNode(this)}},{key:"kind",get:function(){return"text"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.characters.reduce(function(e,t){return e+t.text},"")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isText(e))return e;if("string"==typeof e&&(e={leaves:[{text:e}]}),(0,_isPlainObject2.default)(e)){if(e.text){var r=e,a=r.text,n=r.marks;e={key:r.key,leaves:[{text:a,marks:n}]}}return t.fromJSON(e)}throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e))return new _immutable.List(e.map(t.create));throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isText(e))return e;var r=e.leaves,a=void 0===r?[]:r,n=e.key,i=void 0===n?(0,_generateKey2.default)():n;return new t({characters:a.map(_leaf2.default.fromJSON).reduce(function(e,t){return e.concat(t.getCharacters())},new _immutable.List),key:i})}},{key:"isText",value:function(e){return!(!e||!e[_modelTypes2.default.TEXT])}},{key:"isTextList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isText(e)})}}]),t}();Text.fromJS=Text.fromJSON,Text.prototype[_modelTypes2.default.TEXT]=!0,(0,_memoize2.default)(Text.prototype,["getMarks","getMarksAsArray"],{takesArguments:!1}),(0,_memoize2.default)(Text.prototype,["getDecoratedCharacters","getDecorations","getLeaves","getMarksAtIndex","validate"],{takesArguments:!0}),exports.default=Text},{"../constants/model-types":188,"../utils/generate-key":210,"../utils/memoize":212,"./character":193,"./leaf":198,"./mark":199,"is-plain-object":6}],206:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_data=require("./data"),_data2=_interopRequireDefault(_data),_document=require("./document"),_document2=_interopRequireDefault(_document),_history=require("./history"),_history2=_interopRequireDefault(_history),_range=require("./range"),_range2=_interopRequireDefault(_range),_schema=require("./schema"),_schema2=_interopRequireDefault(_schema);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DEFAULTS={data:new _immutable.Map,decorations:null,document:_document2.default.create(),history:_history2.default.create(),schema:_schema2.default.create(),selection:_range2.default.create()},Value=function(e){function t(){return _classCallCheck(this,t),
_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,(0,_immutable.Record)(DEFAULTS)),_createClass(t,[{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(0,require("./change").default)(_extends({},e,{value:this}))}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={kind:this.kind,document:this.document.toJSON(e)};if(e.preserveData&&(t.data=this.data.toJSON()),e.preserveDecorations&&(t.decorations=this.decorations?this.decorations.toArray().map(function(e){return e.toJSON()}):null),e.preserveHistory&&(t.history=this.history.toJSON()),e.preserveSelection&&(t.selection=this.selection.toJSON()),e.preserveSchema&&(t.schema=this.schema.toJSON()),e.preserveSelection&&!e.preserveKeys){var n=this.document,i=this.selection;t.selection.anchorPath=i.isSet?n.getPath(i.anchorKey):null,t.selection.focusPath=i.isSet?n.getPath(i.focusKey):null,delete t.selection.anchorKey,delete t.selection.focusKey}return t}},{key:"toJS",value:function(e){return this.toJSON(e)}},{key:"kind",get:function(){return"value"}},{key:"hasUndos",get:function(){return this.history.undos.size>0}},{key:"hasRedos",get:function(){return this.history.redos.size>0}},{key:"isBlurred",get:function(){return this.selection.isBlurred}},{key:"isFocused",get:function(){return this.selection.isFocused}},{key:"isCollapsed",get:function(){return this.selection.isCollapsed}},{key:"isExpanded",get:function(){return this.selection.isExpanded}},{key:"isBackward",get:function(){return this.selection.isBackward}},{key:"isForward",get:function(){return this.selection.isForward}},{key:"startKey",get:function(){return this.selection.startKey}},{key:"endKey",get:function(){return this.selection.endKey}},{key:"startOffset",get:function(){return this.selection.startOffset}},{key:"endOffset",get:function(){return this.selection.endOffset}},{key:"anchorKey",get:function(){return this.selection.anchorKey}},{key:"focusKey",get:function(){return this.selection.focusKey}},{key:"anchorOffset",get:function(){return this.selection.anchorOffset}},{key:"focusOffset",get:function(){return this.selection.focusOffset}},{key:"startBlock",get:function(){return this.startKey&&this.document.getClosestBlock(this.startKey)}},{key:"endBlock",get:function(){return this.endKey&&this.document.getClosestBlock(this.endKey)}},{key:"anchorBlock",get:function(){return this.anchorKey&&this.document.getClosestBlock(this.anchorKey)}},{key:"focusBlock",get:function(){return this.focusKey&&this.document.getClosestBlock(this.focusKey)}},{key:"startInline",get:function(){return this.startKey&&this.document.getClosestInline(this.startKey)}},{key:"endInline",get:function(){return this.endKey&&this.document.getClosestInline(this.endKey)}},{key:"anchorInline",get:function(){return this.anchorKey&&this.document.getClosestInline(this.anchorKey)}},{key:"focusInline",get:function(){return this.focusKey&&this.document.getClosestInline(this.focusKey)}},{key:"startText",get:function(){return this.startKey&&this.document.getDescendant(this.startKey)}},{key:"endText",get:function(){return this.endKey&&this.document.getDescendant(this.endKey)}},{key:"anchorText",get:function(){return this.anchorKey&&this.document.getDescendant(this.anchorKey)}},{key:"focusText",get:function(){return this.focusKey&&this.document.getDescendant(this.focusKey)}},{key:"nextBlock",get:function(){return this.endKey&&this.document.getNextBlock(this.endKey)}},{key:"previousBlock",get:function(){return this.startKey&&this.document.getPreviousBlock(this.startKey)}},{key:"nextInline",get:function(){return this.endKey&&this.document.getNextInline(this.endKey)}},{key:"previousInline",get:function(){return this.startKey&&this.document.getPreviousInline(this.startKey)}},{key:"nextText",get:function(){return this.endKey&&this.document.getNextText(this.endKey)}},{key:"previousText",get:function(){return this.startKey&&this.document.getPreviousText(this.startKey)}},{key:"characters",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getCharactersAtRange(this.selection)}},{key:"marks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?_document2.default.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getTextsAtRange(this.selection)}},{key:"isEmpty",get:function(){return!!this.isCollapsed||(0==this.endOffset||0==this.startOffset)&&0==this.fragment.text.length}},{key:"isInVoid",get:function(){return!this.isExpanded&&this.document.hasVoidParent(this.startKey)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isValue(e))return e;if((0,_isPlainObject2.default)(e))return t.fromJSON(e);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isValue(e))return{data:e.data,decorations:e.decorations,schema:e.schema};if((0,_isPlainObject2.default)(e)){var n={};return"data"in e&&(n.data=_data2.default.create(e.data)),"decorations"in e&&(n.decorations=_range2.default.createList(e.decorations)),"schema"in e&&(n.schema=_schema2.default.create(e.schema)),n}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.document,s=void 0===i?{}:i,r=e.selection,o=void 0===r?{}:r,a=e.schema,u=void 0===a?{}:a,c=new _immutable.Map;if(s=_document2.default.fromJSON(s),o=_range2.default.fromJSON(o),u=_schema2.default.fromJSON(u),n.plugins){var l=!0,h=!1,f=void 0;try{for(var d,y=n.plugins[Symbol.iterator]();!(l=(d=y.next()).done);l=!0){var g=d.value;g.data&&(c=c.merge(g.data))}}catch(e){h=!0,f=e}finally{try{!l&&y.return&&y.return()}finally{if(h)throw f}}}if("data"in e&&(c=c.merge(e.data)),o.isUnset){var m=s.getFirstText();m&&(o=o.collapseToStartOf(m))}var k=new t({data:c,document:s,selection:o,schema:u});return!1!==n.normalize&&(k=k.change({save:!1}).normalize().value),k}},{key:"isValue",value:function(e){return!(!e||!e[_modelTypes2.default.VALUE])}}]),t}();Value.fromJS=Value.fromJSON,Value.prototype[_modelTypes2.default.VALUE]=!0,exports.default=Value},{"../constants/model-types":188,"./change":192,"./data":194,"./document":195,"./history":196,"./range":202,"./schema":203,"is-plain-object":6}],207:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _debug=require("debug"),_debug2=_interopRequireDefault(_debug),_operation2=require("../models/operation"),_operation3=_interopRequireDefault(_operation2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}var debug=(0,_debug2.default)("slate:operation:apply"),APPLIERS={add_mark:function(e,t){var o=t.path,n=t.offset,r=t.length,a=t.mark,s=e.document,u=s.assertPath(o);return u=u.addMark(n,r,a),s=s.updateNode(u),e=e.set("document",s)},insert_node:function(e,t){var o=t.path,n=t.node,r=o[o.length-1],a=o.slice(0,-1),s=e.document,u=s.assertPath(a);return u=u.insertNode(r,n),s=s.updateNode(u),e=e.set("document",s)},insert_text:function(e,t){var o=t.path,n=t.offset,r=t.text,a=t.marks,s=e,u=s.document,d=s.selection,i=d,c=i.anchorKey,f=i.focusKey,l=i.anchorOffset,h=i.focusOffset,p=u.assertPath(o);return p=p.insertText(n,r,a),u=u.updateNode(p),c==p.key&&l>=n&&(d=d.moveAnchor(r.length)),f==p.key&&h>=n&&(d=d.moveFocus(r.length)),e=e.set("document",u).set("selection",d)},merge_node:function(e,t){var o=t.path,n=o.slice(0,o.length-1).concat([o[o.length-1]-1]),r=e,a=r.document,s=r.selection,u=a.assertPath(n),d=a.assertPath(o),i=a.getParent(u.key),c=i.nodes.indexOf(u),f=i.nodes.indexOf(d);if(i=i.mergeNode(c,f),a=a.updateNode(i),"text"==u.kind){var l=s,h=l.anchorKey,p=l.anchorOffset,m=l.focusKey,v=l.focusOffset,y=!1;h==d.key&&(s=s.moveAnchorTo(u.key,u.text.length+p),y=!0),m==d.key&&(s=s.moveFocusTo(u.key,u.text.length+v),y=!0),y&&(s=s.normalize(a))}return e=e.set("document",a).set("selection",s)},move_node:function(e,t){var o=t.path,n=t.newPath,r=n[n.length-1],a=n.slice(0,-1),s=o.slice(0,-1),u=o[o.length-1],d=e.document,i=d.assertPath(o),c=d.getParent(i.key);c=c.removeNode(u),d=d.updateNode(c);var f=void 0;return s.every(function(e,t){return e===a[t]})&&s.length===a.length?f=c:s.every(function(e,t){return e===a[t]})&&u<a[s.length]?(a[s.length]--,f=d.assertPath(a)):f=d.assertPath(a),f=f.insertNode(r,i),d=d.updateNode(f),e=e.set("document",d)},remove_mark:function(e,t){var o=t.path,n=t.offset,r=t.length,a=t.mark,s=e.document,u=s.assertPath(o);return u=u.removeMark(n,r,a),s=s.updateNode(u),e=e.set("document",s)},remove_node:function(e,t){var o=t.path,n=e,r=n.document,a=n.selection,s=a,u=s.startKey,d=s.endKey,i=r.assertPath(o);if(a.isSet){var c=i.hasNode(u),f=i.hasNode(d),l="text"==i.kind?i:i.getFirstText()||i,h="text"==i.kind?i:i.getLastText()||i,p=r.getPreviousText(l.key),m=r.getNextText(h.key);c&&(a=p?a.moveStartTo(p.key,p.text.length):m?a.moveStartTo(m.key,0):a.deselect()),a.isSet&&f&&(a=p?a.moveEndTo(p.key,p.text.length):m?a.moveEndTo(m.key,0):a.deselect()),a.isSet&&(a=a.normalize(r))}var v=r.getParent(i.key),y=v.nodes.indexOf(i);return v=v.removeNode(y),r=r.updateNode(v),e=e.set("document",r).set("selection",a)},remove_text:function(e,t){var o=t.path,n=t.offset,r=t.text.length,a=n+r,s=e,u=s.document,d=s.selection,i=d,c=i.anchorKey,f=i.focusKey,l=i.anchorOffset,h=i.focusOffset,p=u.assertPath(o);return c==p.key&&l>=a&&(d=d.moveAnchor(-r)),f==p.key&&h>=a&&(d=d.moveFocus(-r)),p=p.removeText(n,r),u=u.updateNode(p),e=e.set("document",u).set("selection",d)},set_mark:function(e,t){var o=t.path,n=t.offset,r=t.length,a=t.mark,s=t.properties,u=e.document,d=u.assertPath(o);return d=d.updateMark(n,r,a,s),u=u.updateNode(d),e=e.set("document",u)},set_node:function(e,t){var o=t.path,n=t.properties,r=e.document,a=r.assertPath(o);return a=a.merge(n),r=r.updateNode(a),e=e.set("document",r)},set_selection:function(e,t){var o=t.properties,n=o.anchorPath,r=o.focusPath,a=_objectWithoutProperties(o,["anchorPath","focusPath"]),s=e,u=s.document,d=s.selection;return void 0!==n&&(a.anchorKey=null===n?null:u.assertPath(n).key),void 0!==r&&(a.focusKey=null===r?null:u.assertPath(r).key),d=(d=d.merge(a)).normalize(u),e=e.set("selection",d)},set_value:function(e,t){var o=t.properties;return e=e.merge(o)},split_node:function(e,t){var o=t.path,n=t.position,r=e,a=r.document,s=r.selection,u=a.assertPath(o),d=a.getParent(u.key),i=d.nodes.indexOf(u);d=d.splitNode(i,n),a=a.updateNode(d);var c=s,f=c.startKey,l=c.endKey,h=c.startOffset,p=c.endOffset,m=a.getNextText(u.key),v=!1;return u.key==f&&n<=h&&(s=s.moveStartTo(m.key,h-n),v=!0),u.key==l&&n<=p&&(s=s.moveEndTo(m.key,p-n),v=!0),v&&(s=s.normalize(a)),e=e.set("document",a).set("selection",s)}};function applyOperation(e,t){var o=(t=_operation3.default.create(t)).type,n=APPLIERS[o];if(!n)throw new Error('Unknown operation type: "'+o+'".');return debug(o,t),e=n(e,t)}exports.default=applyOperation},{"../models/operation":201,debug:1}],208:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _apply=require("./apply"),_apply2=_interopRequireDefault(_apply),_invert=require("./invert"),_invert2=_interopRequireDefault(_invert);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default={apply:_apply2.default,invert:_invert2.default}},{"./apply":207,"./invert":209}],209:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _debug=require("debug"),_debug2=_interopRequireDefault(_debug),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),_operation=require("../models/operation"),_operation2=_interopRequireDefault(_operation);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var debug=(0,_debug2.default)("slate:operation:invert");function invertOperation(e){var t=(e=_operation2.default.create(e)).type;if(debug(t,e),"insert_node"==t)return e.set("type","remove_node");if("remove_node"==t)return e.set("type","insert_node");if("move_node"==t){var r=e,n=r.newPath,o=r.path,a=n,i=o,s=o.length-1,u=n.length-1;return o.length<a.length&&o.slice(0,s).every(function(e,t){return e==a[t]})&&o[s]<a[s]&&(a=a.slice(0,s).concat([a[s]-1]).concat(a.slice(s+1,a.length))),n.length<i.length&&n.slice(0,u).every(function(e,t){return e==i[t]})&&n[u]<=i[u]&&(i=i.slice(0,u).concat([i[u]+1]).concat(i.slice(u+1,i.length))),e.set("path",a).set("newPath",i)}if("merge_node"==t){var l=e.path,c=l.length-1,p=l.slice(0,c).concat([l[c]-1]);return e.set("type","split_node").set("path",p)}if("split_node"==t){var _=e.path,d=_.length-1,f=_.slice(0,d).concat([_[d]+1]);return e.set("type","merge_node").set("path",f)}if("set_node"==t){var h=e,v=h.properties,y=h.node,g=y.merge(v),m=(0,_pick2.default)(y,Object.keys(v));return e.set("node",g).set("properties",m)}if("insert_text"==t)return e.set("type","remove_text");if("remove_text"==t)return e.set("type","insert_text");if("add_mark"==t)return e.set("type","remove_mark");if("remove_mark"==t)return e.set("type","add_mark");if("set_mark"==t){var k=e,P=k.properties,b=k.mark,O=b.merge(P),j=(0,_pick2.default)(b,Object.keys(P));return e.set("mark",O).set("properties",j)}if("set_selection"==t){var K=e,q=K.properties,x=K.selection,D=K.value,R=q.anchorPath,w=q.focusPath,M=_objectWithoutProperties(q,["anchorPath","focusPath"]),W=D.document;void 0!==R&&(M.anchorKey=null===R?null:W.assertPath(R).key),void 0!==w&&(M.focusKey=null===w?null:W.assertPath(w).key);var z=x.merge(M),A=(0,_pick2.default)(x,Object.keys(M));return void 0!==R&&(A.anchorPath=null===A.anchorKey?null:W.getPath(A.anchorKey),delete A.anchorKey),void 0!==w&&(A.focusPath=null===A.focusKey?null:W.getPath(A.focusKey),delete A.focusKey),e.set("selection",z).set("properties",A)}if("set_value"==t){var B=e,C=B.properties,E=B.value,F=E.merge(C),G=(0,_pick2.default)(E,Object.keys(C));return e.set("value",F).set("properties",G)}}exports.default=invertOperation},{"../models/operation":201,debug:1,"lodash/pick":171}],210:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=void 0,generate=void 0;function generateKey(){return generate()}function setKeyGenerator(e){generate=e}function resetKeyGenerator(){n=0,generate=function(){return""+n++}}resetKeyGenerator(),exports.default=generateKey,exports.setKeyGenerator=setKeyGenerator,exports.resetKeyGenerator=resetKeyGenerator},{}],211:[function(require,module,exports){"use strict";function isIndexInRange(e,t,n){var s=n.startKey,r=n.startOffset,a=n.endKey,d=n.endOffset;return t.key==s&&t.key==a?r<=e&&e<d:t.key==s?r<=e:t.key!=a||e<d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isIndexInRange},{}],212:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IS_DEV="undefined"!=typeof process&&process.env&&!1,ENABLED=!0,CACHE_KEY=0,LEAF={},UNDEFINED={},UNSET=void 0;function memoize(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).takesArguments,n=void 0===r||r,a=!0,i=!1,o=void 0;try{for(var _,c=function(){var t=_.value,r=e[t];if(!r)throw new Error('Object does not have a property named "'+t+'".');e[t]=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];if(IS_DEV){if(!ENABLED)return r.apply(this,a);CACHE_KEY!==this.__cache_key&&(this.__cache_key=CACHE_KEY,this.__cache=new Map)}this.__cache||(this.__cache=new Map);var o=void 0,_=void 0;if(n?(_=[t].concat(a),o=getIn(this.__cache,_)):o=this.__cache.get(t),o!==UNSET)return o===UNDEFINED?void 0:o;var c=r.apply(this,a),E=void 0===c?UNDEFINED:c;return n?this.__cache=setIn(this.__cache,_,E):this.__cache.set(t,E),c}},E=t[Symbol.iterator]();!(a=(_=E.next()).done);a=!0)c()}catch(e){i=!0,o=e}finally{try{!a&&E.return&&E.return()}finally{if(i)throw o}}}function getIn(e,t){var r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var _=i.value;if((e=e.get(_))===UNSET)return UNSET}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return e.get(LEAF)}function setIn(e,t,r){var n=e,a=void 0,i=!0,o=!1,_=void 0;try{for(var c,E=t[Symbol.iterator]();!(i=(c=E.next()).done);i=!0){var h=c.value;(a=n.get(h))===UNSET&&(a=new Map,n.set(h,a)),n=a}}catch(e){o=!0,_=e}finally{try{!i&&E.return&&E.return()}finally{if(o)throw _}}return a.set(LEAF,r),e}function __clear(){++CACHE_KEY>=Number.MAX_SAFE_INTEGER&&(CACHE_KEY=0)}function __enable(e){ENABLED=e}exports.default=memoize,exports.__clear=__clear,exports.__enable=__enable}).call(this,require("_process"))},{_process:177}],213:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _esrever=require("esrever"),SURROGATE_START=55296,SURROGATE_END=57343,SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function isSurrogate(u){return SURROGATE_START<=u&&u<=SURROGATE_END}function isWord(u,F){if(SPACE.test(u))return!1;if(CHAMELEON.test(u)){var e=F.charAt(0),r=getCharLength(e);if(isWord(e=F.slice(0,r),F.slice(r)))return!0}return!PUNCTUATION.test(u)}function getCharLength(u){return isSurrogate(u.charCodeAt(0))?2:1}function getCharOffset(u){return getCharLength(u.charAt(0))}function getCharOffsetBackward(u,F){return u=u.slice(0,F),getCharOffset(u=(0,_esrever.reverse)(u))}function getCharOffsetForward(u,F){return getCharOffset(u=u.slice(F))}function getWordOffset(u){for(var F=0,e=0,r=!1,t=void 0;t=u.charAt(e);){var A=getCharLength(t);if(isWord(t=u.slice(e,e+A),u.slice(e+A)))r=!0,F+=A;else{if(r)break;F+=A}e+=A}return F}function getWordOffsetBackward(u,F){return u=u.slice(0,F),getWordOffset(u=(0,_esrever.reverse)(u))}function getWordOffsetForward(u,F){return getWordOffset(u=u.slice(F))}exports.default={getCharOffsetForward:getCharOffsetForward,getCharOffsetBackward:getCharOffsetBackward,getWordOffsetBackward:getWordOffsetBackward,getWordOffsetForward:getWordOffsetForward}},{esrever:4}]},{},[190])(190)});
